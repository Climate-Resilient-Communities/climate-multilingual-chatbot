2025-08-16 17:48:07,071 - datasets - INFO - PyTorch version 2.6.0 available.
INFO:     Started server process [60108]
INFO:     Waiting for application startup.
2025-08-16 17:48:09,483 - src.webui.api.main - INFO - 🚀 Starting Climate Chatbot API...
2025-08-16 17:48:09,483 - src.webui.api.main - INFO - Initializing pipeline components...
2025-08-16 17:48:09,613 - src.models.nova_flow - INFO - ✓ Bedrock client initialized
2025-08-16 17:48:09,655 - src.models.cohere_flow - INFO - ✓ Cohere client initialized
2025-08-16 17:48:09,655 - src.models.gen_response_unified - INFO - ✓ Unified Response Generator initialized
2025-08-16 17:48:09,655 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:48:09,660 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:48:09,661 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:48:09,752 - src.models.nova_flow - INFO - ✓ Bedrock client initialized
2025-08-16 17:48:09,779 - src.models.cohere_flow - INFO - ✓ Cohere client initialized
Fetching 30 files:   0%|          | 0/30 [00:00<?, ?it/s]Fetching 30 files: 100%|██████████| 30/30 [00:00<00:00, 9782.25it/s]
2025-08-16 17:48:11,465 - FlagEmbedding.finetune.embedder.encoder_only.m3.runner - INFO - loading existing colbert_linear and sparse_linear---------
2025-08-16 17:48:11,470 - src.models.climate_pipeline - INFO - ✓ Embedding model initialized with fast tokenizer
2025-08-16 17:48:11,470 - src.models.climate_pipeline - INFO - Init: embeddings model ready in 1.69s
2025-08-16 17:48:11,473 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/luis_ticas/Documents/GitHub/climate-multilingual-chatbot/.venv/lib/python3.12/site-packages/pinecone_plugins'])
2025-08-16 17:48:11,474 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.assistant
2025-08-16 17:48:11,514 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2025-08-16 17:48:11,527 - pinecone_plugin_interface.logging - INFO - Installing plugin assistant into Pinecone
2025-08-16 17:48:11,528 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2025-08-16 17:48:11,528 - src.models.climate_pipeline - INFO - Pinecone: initialized using v5 client
2025-08-16 17:48:11,830 - src.models.climate_pipeline - INFO - Init: pinecone index ready in 0.36s
2025-08-16 17:48:11,853 - src.models.climate_pipeline - INFO - Init: cohere client ready in 0.02s
2025-08-16 17:48:11,853 - src.models.climate_pipeline - INFO - ✓ Climate Query Pipeline initialized (eager heavy-init)
2025-08-16 17:48:11,853 - src.webui.api.main - INFO - ✅ Climate pipeline initialized (prewarming in background)
2025-08-16 17:48:11,853 - src.webui.api.main - INFO - ✅ Conversation parser initialized
2025-08-16 17:48:11,853 - src.webui.api.main - INFO - ✅ Language router initialized
2025-08-16 17:48:11,853 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:48:11,855 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:48:11,855 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:48:11,855 - src.webui.api.main - INFO - ✅ Redis cache initialized
2025-08-16 17:48:11,855 - src.webui.api.main - INFO - 🎉 All components initialized successfully!
2025-08-16 17:48:11,855 - src.webui.api.main - INFO - 🔥 Starting background pipeline prewarming...
2025-08-16 17:48:11,855 - src.models.climate_pipeline - INFO - Prewarm: starting heavy component initialization
2025-08-16 17:48:11,855 - src.models.climate_pipeline - INFO - Prewarm: embeddings ready in 0.00s
2025-08-16 17:48:11,855 - src.models.climate_pipeline - INFO - Prewarming embed model...
You're using a XLMRobertaTokenizerFast tokenizer. Please note that with a fast tokenizer, using the `__call__` method is faster than using a method to encode the text followed by a call to the `pad` method to get a padded encoding.
2025-08-16 17:48:18,014 - src.models.climate_pipeline - INFO - Prewarm encode took 6159ms
2025-08-16 17:48:18,099 - src.models.climate_pipeline - INFO - Second prewarm took 85ms
2025-08-16 17:48:18,099 - src.models.climate_pipeline - INFO - Prewarm: pinecone ready in 0.00s
2025-08-16 17:48:18,099 - src.models.climate_pipeline - INFO - Prewarm: cohere client ready in 0.00s
2025-08-16 17:48:18,099 - src.models.climate_pipeline - INFO - Prewarm complete in 6.24s
2025-08-16 17:48:18,099 - src.webui.api.main - INFO - ✅ Background prewarming completed
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-08-16 17:48:41,886 - src.webui.api.main - INFO - REQUEST GET /health status=200 time=0.001s id=req_1755380921884 ip=127.0.0.1
INFO:     127.0.0.1:62958 - "GET /health HTTP/1.1" 200 OK
2025-08-16 17:48:49,077 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755380929064 query_len=23 lang=en
2025-08-16 17:48:49,077 - src.webui.api.routers.chat - INFO - Language routing: detected=en model=nova
2025-08-16 17:48:49,258 - src.models.climate_pipeline - INFO - ✓ Language map loaded from languages.json: 187 names → 183 codes (e.g., belarusian→be)
2025-08-16 17:48:49,258 - src.models.climate_pipeline - INFO - Processing query: 'What is climate change?...' in english (code: en)
2025-08-16 17:48:49,258 - src.models.climate_pipeline - INFO - Raw query repr: 'What is climate change?'
2025-08-16 17:48:49,259 - src.models.climate_pipeline - INFO - Router IN → language_name=english, language_code=en
2025-08-16 17:48:49,259 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:48:49,259 - src.models.query_routing - INFO - Language: english (en) → Model: Nova
2025-08-16 17:48:49,262 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=False
2025-08-16 17:48:49,262 - src.models.climate_pipeline - INFO - Router OUT → english_query='What is climate change?'
2025-08-16 17:48:49,262 - src.models.climate_pipeline - INFO - Router OUT → processed_query='What is climate change?'
2025-08-16 17:48:49,262 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:48:49,262 - src.models.climate_pipeline - INFO - Timing: routing=2.7ms
2025-08-16 17:48:49,262 - src.models.climate_pipeline - INFO - Net debug → original_query len=23, utf8_bytes=23
2025-08-16 17:48:49,262 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:48:49,262 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:48:49,262 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:48:49,265 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:48:49,265 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:48:49,268 - src.models.climate_pipeline - INFO - ✓ Cache hit for english - returning cached response
2025-08-16 17:48:49,268 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755380929064 time=0.191s model=nova faithfulness=0.950
2025-08-16 17:48:49,269 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.205s id=req_1755380929064 ip=127.0.0.1
INFO:     127.0.0.1:63040 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:48:50,479 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755380930478 query_len=28 lang=es
2025-08-16 17:48:50,479 - src.webui.api.routers.chat - INFO - Language routing: detected=es model=nova
2025-08-16 17:48:50,479 - src.models.climate_pipeline - INFO - Processing query: '¿Qué es el cambio climático?...' in spanish (code: es)
2025-08-16 17:48:50,479 - src.models.climate_pipeline - INFO - Raw query repr: '¿Qué es el cambio climático?'
2025-08-16 17:48:50,479 - src.models.climate_pipeline - INFO - Router IN → language_name=spanish, language_code=es
2025-08-16 17:48:50,479 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:48:50,479 - src.models.query_routing - INFO - Language: spanish (es) → Model: Nova
2025-08-16 17:48:50,479 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:48:50,479 - src.models.climate_pipeline - INFO - Router OUT → english_query='¿Qué es el cambio climático?'
2025-08-16 17:48:50,479 - src.models.climate_pipeline - INFO - Router OUT → processed_query='¿Qué es el cambio climático?'
2025-08-16 17:48:50,479 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:48:50,479 - src.models.climate_pipeline - INFO - Timing: routing=0.1ms
2025-08-16 17:48:50,479 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:48:50,479 - src.models.query_routing - INFO - Language: spanish (es) → Model: Nova
2025-08-16 17:48:50,479 - src.models.query_routing - INFO - Translating query from spanish to English
2025-08-16 17:48:50,479 - src.models.query_routing - INFO - Router NET IN → query repr='¿Qué es el cambio climático?'
2025-08-16 17:48:51,951 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=1471 status=OK request_id=5bc6c977-3c9a-401c-b2dc-a07bd2bf2b97
2025-08-16 17:48:51,952 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:48:51,952 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?\n\nClimate change refers to significant changes in global temperatures and weather patterns over time. While climate variability has always existed, the term "climate change" spe'
2025-08-16 17:48:51,952 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate variability has always existed, the term "climate change" spe'
2025-08-16 17:48:51,952 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate variability has always existed, the term "climate change" spe'
2025-08-16 17:48:51,952 - src.models.climate_pipeline - INFO - Net debug → original_query len=28, utf8_bytes=31
2025-08-16 17:48:51,952 - src.models.climate_pipeline - INFO - Net debug → english_query len=1004, utf8_bytes=1010
2025-08-16 17:48:51,952 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:48:51,952 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:48:51,976 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:48:51,976 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:48:51,979 - src.models.climate_pipeline - INFO - ✓ Cache hit for spanish - returning cached response
2025-08-16 17:48:51,979 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755380930478 time=1.500s model=nova faithfulness=0.900
2025-08-16 17:48:51,980 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=1.502s id=req_1755380930478 ip=127.0.0.1
INFO:     127.0.0.1:63051 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:48:53,187 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755380933185 query_len=11 lang=ja
2025-08-16 17:48:53,187 - src.webui.api.routers.chat - INFO - Language routing: detected=ja model=nova
2025-08-16 17:48:53,187 - src.models.climate_pipeline - INFO - Processing query: '気候変動とは何ですか？...' in japanese (code: ja)
2025-08-16 17:48:53,187 - src.models.climate_pipeline - INFO - Raw query repr: '気候変動とは何ですか？'
2025-08-16 17:48:53,187 - src.models.climate_pipeline - INFO - Router IN → language_name=japanese, language_code=ja
2025-08-16 17:48:53,187 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:48:53,187 - src.models.query_routing - INFO - Language: japanese (ja) → Model: Nova
2025-08-16 17:48:53,187 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:48:53,187 - src.models.climate_pipeline - INFO - Router OUT → english_query='気候変動とは何ですか？'
2025-08-16 17:48:53,187 - src.models.climate_pipeline - INFO - Router OUT → processed_query='気候変動とは何ですか？'
2025-08-16 17:48:53,187 - src.models.climate_pipeline - WARNING - Router language mismatch: query is in Chinese but Japanese was selected
2025-08-16 17:48:53,188 - src.models.climate_pipeline - INFO - Proceeding despite router mismatch (soft warning only)
2025-08-16 17:48:53,188 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:48:53,188 - src.models.climate_pipeline - INFO - Timing: routing=0.2ms
2025-08-16 17:48:53,188 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:48:53,188 - src.models.query_routing - INFO - Language: japanese (ja) → Model: Nova
2025-08-16 17:48:53,188 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='気候変動とは何ですか？'
2025-08-16 17:48:53,188 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='気候変動とは何ですか？'
2025-08-16 17:48:53,188 - src.models.climate_pipeline - INFO - Net debug → original_query len=11, utf8_bytes=33
2025-08-16 17:48:53,188 - src.models.climate_pipeline - INFO - Net debug → english_query len=11, utf8_bytes=33
2025-08-16 17:48:53,188 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:48:53,188 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:48:53,189 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:48:53,189 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:48:53,190 - src.models.climate_pipeline - INFO - ✓ Cache hit for japanese - returning cached response
2025-08-16 17:48:53,190 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755380933185 time=0.003s model=nova faithfulness=0.950
2025-08-16 17:48:53,191 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.006s id=req_1755380933185 ip=127.0.0.1
INFO:     127.0.0.1:63080 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:48:54,403 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755380934402 query_len=24 lang=de
2025-08-16 17:48:54,403 - src.webui.api.routers.chat - INFO - Language routing: detected=de model=nova
2025-08-16 17:48:54,403 - src.models.climate_pipeline - INFO - Processing query: 'Was ist der Klimawandel?...' in german (code: de)
2025-08-16 17:48:54,403 - src.models.climate_pipeline - INFO - Raw query repr: 'Was ist der Klimawandel?'
2025-08-16 17:48:54,403 - src.models.climate_pipeline - INFO - Router IN → language_name=german, language_code=de
2025-08-16 17:48:54,403 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:48:54,403 - src.models.query_routing - INFO - Language: german (de) → Model: Nova
2025-08-16 17:48:54,403 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:48:54,403 - src.models.climate_pipeline - INFO - Router OUT → english_query='Was ist der Klimawandel?'
2025-08-16 17:48:54,403 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Was ist der Klimawandel?'
2025-08-16 17:48:54,403 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:48:54,403 - src.models.climate_pipeline - INFO - Timing: routing=0.1ms
2025-08-16 17:48:54,403 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:48:54,403 - src.models.query_routing - INFO - Language: german (de) → Model: Nova
2025-08-16 17:48:54,403 - src.models.query_routing - INFO - Translating query from german to English
2025-08-16 17:48:54,403 - src.models.query_routing - INFO - Router NET IN → query repr='Was ist der Klimawandel?'
2025-08-16 17:48:55,347 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=943 status=OK request_id=82c0a92c-bc83-4b64-ae81-600b2faef9e5
2025-08-16 17:48:55,351 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:48:55,356 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is Climate Change?\n\nClimate change refers to significant changes in global temperatures and weather patterns over time. These changes can occur naturally, but the term is most often used to descr'
2025-08-16 17:48:55,356 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is Climate Change?

Climate change refers to significant changes in global temperatures and weather patterns over time. These changes can occur naturally, but the term is most often used to descr'
2025-08-16 17:48:55,356 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is Climate Change?

Climate change refers to significant changes in global temperatures and weather patterns over time. These changes can occur naturally, but the term is most often used to descr'
2025-08-16 17:48:55,356 - src.models.climate_pipeline - INFO - Net debug → original_query len=24, utf8_bytes=24
2025-08-16 17:48:55,358 - src.models.climate_pipeline - INFO - Net debug → english_query len=896, utf8_bytes=902
2025-08-16 17:48:55,358 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:48:55,358 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:48:55,376 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:48:55,376 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:48:55,387 - src.models.climate_pipeline - INFO - ✓ Cache hit for german - returning cached response
2025-08-16 17:48:55,387 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755380934402 time=0.985s model=nova faithfulness=0.950
2025-08-16 17:48:55,395 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.993s id=req_1755380934402 ip=127.0.0.1
INFO:     127.0.0.1:63091 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:48:56,630 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755380936628 query_len=26 lang=sv
2025-08-16 17:48:56,630 - src.webui.api.routers.chat - INFO - Language routing: detected=sv model=nova
2025-08-16 17:48:56,630 - src.models.climate_pipeline - INFO - Processing query: 'Vad är klimatförändringar?...' in swedish (code: sv)
2025-08-16 17:48:56,630 - src.models.climate_pipeline - INFO - Raw query repr: 'Vad är klimatförändringar?'
2025-08-16 17:48:56,630 - src.models.climate_pipeline - INFO - Router IN → language_name=swedish, language_code=sv
2025-08-16 17:48:56,630 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:48:56,630 - src.models.query_routing - INFO - Language: swedish (sv) → Model: Nova
2025-08-16 17:48:56,630 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:48:56,630 - src.models.climate_pipeline - INFO - Router OUT → english_query='Vad är klimatförändringar?'
2025-08-16 17:48:56,630 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Vad är klimatförändringar?'
2025-08-16 17:48:56,630 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:48:56,630 - src.models.climate_pipeline - INFO - Timing: routing=0.1ms
2025-08-16 17:48:56,630 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:48:56,630 - src.models.query_routing - INFO - Language: swedish (sv) → Model: Nova
2025-08-16 17:48:56,630 - src.models.query_routing - INFO - Translating query from swedish to English
2025-08-16 17:48:56,630 - src.models.query_routing - INFO - Router NET IN → query repr='Vad är klimatförändringar?'
2025-08-16 17:48:57,581 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=950 status=OK request_id=01eb8858-4208-48cd-acf2-28fd154e89cb
2025-08-16 17:48:57,583 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:48:57,583 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What are climate changes?\n\nClimate change refers to significant changes in global temperatures and weather patterns over time. While climate change exists naturally, the term is most often used today '
2025-08-16 17:48:57,583 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What are climate changes?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate change exists naturally, the term is most often used today '
2025-08-16 17:48:57,583 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What are climate changes?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate change exists naturally, the term is most often used today '
2025-08-16 17:48:57,583 - src.models.climate_pipeline - INFO - Net debug → original_query len=26, utf8_bytes=29
2025-08-16 17:48:57,583 - src.models.climate_pipeline - INFO - Net debug → english_query len=779, utf8_bytes=779
2025-08-16 17:48:57,584 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:48:57,584 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:48:57,592 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:48:57,592 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:48:57,593 - src.models.climate_pipeline - INFO - ✓ Cache hit for swedish - returning cached response
2025-08-16 17:48:57,594 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755380936628 time=0.964s model=nova faithfulness=0.950
2025-08-16 17:48:57,595 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.966s id=req_1755380936628 ip=127.0.0.1
INFO:     127.0.0.1:63114 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:48:58,804 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755380938803 query_len=23 lang=da
2025-08-16 17:48:58,804 - src.webui.api.routers.chat - INFO - Language routing: detected=da model=nova
2025-08-16 17:48:58,804 - src.models.climate_pipeline - INFO - Processing query: 'Hvad er klimaændringer?...' in danish (code: da)
2025-08-16 17:48:58,804 - src.models.climate_pipeline - INFO - Raw query repr: 'Hvad er klimaændringer?'
2025-08-16 17:48:58,804 - src.models.climate_pipeline - INFO - Router IN → language_name=danish, language_code=da
2025-08-16 17:48:58,804 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:48:58,804 - src.models.query_routing - INFO - Language: danish (da) → Model: Nova
2025-08-16 17:48:58,804 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:48:58,804 - src.models.climate_pipeline - INFO - Router OUT → english_query='Hvad er klimaændringer?'
2025-08-16 17:48:58,804 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Hvad er klimaændringer?'
2025-08-16 17:48:58,804 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:48:58,804 - src.models.climate_pipeline - INFO - Timing: routing=0.1ms
2025-08-16 17:48:58,804 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:48:58,804 - src.models.query_routing - INFO - Language: danish (da) → Model: Nova
2025-08-16 17:48:58,804 - src.models.query_routing - INFO - Translating query from danish to English
2025-08-16 17:48:58,804 - src.models.query_routing - INFO - Router NET IN → query repr='Hvad er klimaændringer?'
2025-08-16 17:48:59,542 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=737 status=OK request_id=fec374aa-f98d-41b3-b30b-f22e0119fb17
2025-08-16 17:48:59,542 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:48:59,542 - src.models.query_routing - INFO - Router NET OUT → english_query repr="What are climate changes?\n\nClimate change refers to significant changes in global temperatures and weather patterns over time. While climate variability has always been a natural part of Earth's histo"
2025-08-16 17:48:59,542 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What are climate changes?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate variability has always been a natural part of Earth's histo'
2025-08-16 17:48:59,542 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What are climate changes?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate variability has always been a natural part of Earth's histo'
2025-08-16 17:48:59,542 - src.models.climate_pipeline - INFO - Net debug → original_query len=23, utf8_bytes=24
2025-08-16 17:48:59,542 - src.models.climate_pipeline - INFO - Net debug → english_query len=538, utf8_bytes=538
2025-08-16 17:48:59,542 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:48:59,542 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:48:59,546 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:48:59,546 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:48:59,547 - src.models.climate_pipeline - INFO - ✓ Cache hit for danish - returning cached response
2025-08-16 17:48:59,547 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755380938803 time=0.744s model=nova faithfulness=0.950
2025-08-16 17:48:59,548 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.745s id=req_1755380938803 ip=127.0.0.1
INFO:     127.0.0.1:63134 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:49:00,757 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755380940756 query_len=22 lang=no
2025-08-16 17:49:00,758 - src.webui.api.routers.chat - INFO - Language routing: detected=no model=nova
2025-08-16 17:49:00,758 - src.models.climate_pipeline - INFO - Processing query: 'Hva er klimaendringer?...' in norwegian (code: no)
2025-08-16 17:49:00,758 - src.models.climate_pipeline - INFO - Raw query repr: 'Hva er klimaendringer?'
2025-08-16 17:49:00,758 - src.models.climate_pipeline - INFO - Router IN → language_name=norwegian, language_code=no
2025-08-16 17:49:00,758 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:49:00,758 - src.models.query_routing - INFO - Language: norwegian (no) → Model: Nova
2025-08-16 17:49:00,758 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:49:00,758 - src.models.climate_pipeline - INFO - Router OUT → english_query='Hva er klimaendringer?'
2025-08-16 17:49:00,758 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Hva er klimaendringer?'
2025-08-16 17:49:00,758 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:49:00,758 - src.models.climate_pipeline - INFO - Timing: routing=0.2ms
2025-08-16 17:49:00,758 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:49:00,758 - src.models.query_routing - INFO - Language: norwegian (no) → Model: Nova
2025-08-16 17:49:00,758 - src.models.query_routing - INFO - Translating query from norwegian to English
2025-08-16 17:49:00,758 - src.models.query_routing - INFO - Router NET IN → query repr='Hva er klimaendringer?'
2025-08-16 17:49:01,752 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=993 status=OK request_id=7e114e89-aab2-467c-83d3-9c45ed8fe781
2025-08-16 17:49:01,753 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:49:01,753 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What are climate changes?\n\nClimate change refers to significant changes in global temperatures and weather patterns over time. While climate variability is a natural phenomenon, the term "climate chan'
2025-08-16 17:49:01,753 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What are climate changes?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate variability is a natural phenomenon, the term "climate chan'
2025-08-16 17:49:01,753 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What are climate changes?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate variability is a natural phenomenon, the term "climate chan'
2025-08-16 17:49:01,753 - src.models.climate_pipeline - INFO - Net debug → original_query len=22, utf8_bytes=22
2025-08-16 17:49:01,753 - src.models.climate_pipeline - INFO - Net debug → english_query len=644, utf8_bytes=644
2025-08-16 17:49:01,753 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:49:01,753 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:49:01,760 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:49:01,760 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:49:01,828 - src.models.climate_pipeline - INFO - ✓ Cache hit for norwegian - returning cached response
2025-08-16 17:49:01,829 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755380940756 time=1.071s model=nova faithfulness=0.950
2025-08-16 17:49:01,829 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=1.073s id=req_1755380940756 ip=127.0.0.1
INFO:     127.0.0.1:63155 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:49:03,036 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755380943035 query_len=23 lang=fi
2025-08-16 17:49:03,036 - src.webui.api.routers.chat - INFO - Language routing: detected=fi model=nova
2025-08-16 17:49:03,036 - src.models.climate_pipeline - INFO - Processing query: 'Mitä on ilmastonmuutos?...' in finnish (code: fi)
2025-08-16 17:49:03,036 - src.models.climate_pipeline - INFO - Raw query repr: 'Mitä on ilmastonmuutos?'
2025-08-16 17:49:03,036 - src.models.climate_pipeline - INFO - Router IN → language_name=finnish, language_code=fi
2025-08-16 17:49:03,036 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:49:03,036 - src.models.query_routing - INFO - Language: finnish (fi) → Model: Nova
2025-08-16 17:49:03,036 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:49:03,037 - src.models.climate_pipeline - INFO - Router OUT → english_query='Mitä on ilmastonmuutos?'
2025-08-16 17:49:03,037 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Mitä on ilmastonmuutos?'
2025-08-16 17:49:03,037 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:49:03,037 - src.models.climate_pipeline - INFO - Timing: routing=0.1ms
2025-08-16 17:49:03,037 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:49:03,037 - src.models.query_routing - INFO - Language: finnish (fi) → Model: Nova
2025-08-16 17:49:03,037 - src.models.query_routing - INFO - Translating query from finnish to English
2025-08-16 17:49:03,037 - src.models.query_routing - INFO - Router NET IN → query repr='Mitä on ilmastonmuutos?'
2025-08-16 17:49:03,934 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=897 status=OK request_id=07af4bc6-57c8-46dd-9744-1a41d199da5a
2025-08-16 17:49:03,935 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:49:03,935 - src.models.query_routing - INFO - Router NET OUT → english_query repr="What is climate change?\n\nClimate change refers to significant changes in global temperatures and weather patterns over time. While climate variability has existed throughout Earth's history, the term "
2025-08-16 17:49:03,935 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate variability has existed throughout Earth's history, the term '
2025-08-16 17:49:03,935 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate variability has existed throughout Earth's history, the term '
2025-08-16 17:49:03,935 - src.models.climate_pipeline - INFO - Net debug → original_query len=23, utf8_bytes=24
2025-08-16 17:49:03,935 - src.models.climate_pipeline - INFO - Net debug → english_query len=681, utf8_bytes=681
2025-08-16 17:49:03,935 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:49:03,935 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:49:03,937 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:49:03,937 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:49:03,938 - src.models.climate_pipeline - INFO - Cache miss for finnish query
2025-08-16 17:49:03,943 - src.models.climate_pipeline - INFO - Timing: cache=7.7ms
2025-08-16 17:49:03,943 - src.models.climate_pipeline - INFO - Step 3: Query Rewriting
2025-08-16 17:49:03,943 - src.models.conversation_parser - INFO - No conversation history to format
2025-08-16 17:49:03,943 - src.models.climate_pipeline - INFO - Rewriter IN → expected_lang=fi, history_len=0
2025-08-16 17:49:03,943 - src.models.climate_pipeline - INFO - Rewriter IN → original_query='Mitä on ilmastonmuutos?'
2025-08-16 17:49:03,944 - query_rewriter - INFO - Rewriter NET IN → expected_lang=fi, user_query repr='Mitä on ilmastonmuutos?', norm='Mitä on ilmastonmuutos?'
2025-08-16 17:49:04,531 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=586 status=OK request_id=aeec6a35-a634-4429-89a7-c151cbfc84e4
2025-08-16 17:49:04,532 - query_rewriter - INFO - Model raw (first 300): {"reason":"User query is in Finnish and asks about climate change.","language":"fi","expected_language":"fi","language_match":true,"classification":"on-topic","rewrite_en":"What is climate change?","ask_how_to_use":false,"how_it_works":null,"error":null}
2025-08-16 17:49:04,532 - query_rewriter - INFO - Rewriter NET OUT → json keys=['ask_how_to_use', 'classification', 'error', 'expected_language', 'how_it_works', 'language', 'language_match', 'reason', 'rewrite_en']
2025-08-16 17:49:04,532 - query_rewriter - INFO - 🔍 CLASSIFICATION_DEBUG: query='Mitä on ilmastonmuutos?...' expected_lang=fi detected_lang=fi classification=on-topic language_match=True reason='User query is in Finnish and asks about climate change....'
2025-08-16 17:49:04,532 - src.models.climate_pipeline - INFO - Rewriter OUT → detected_lang='fi', classification='on-topic', language_match='yes', canned=False
2025-08-16 17:49:04,533 - src.models.climate_pipeline - INFO - Rewriter OUT → rewrite_en='What is climate change?'
2025-08-16 17:49:04,533 - src.models.climate_pipeline - INFO - ✓ Query rewritten (JSON) for better retrieval
2025-08-16 17:49:04,533 - src.models.climate_pipeline - INFO - Timing: rewrite=590.4ms
2025-08-16 17:49:04,533 - src.models.climate_pipeline - INFO - Step 4: Input Guards
2025-08-16 17:49:04,533 - src.models.climate_pipeline - INFO - ✓ Input guards passed
2025-08-16 17:49:04,533 - src.models.climate_pipeline - INFO - Timing: guards=0.0ms
2025-08-16 17:49:04,533 - src.models.climate_pipeline - INFO - Step 5: Document Retrieval
2025-08-16 17:49:04,533 - src.models.retrieval - INFO - 🔄 Pre-computing query embeddings to avoid redundant encode() calls
2025-08-16 17:49:04,533 - src.models.retrieval - INFO - Query embedding IN: query_len=23 chars, query_repr='What is climate change?...'
2025-08-16 17:49:05,328 - src.models.retrieval - INFO - dep=query_embed op=encode ms=794 dense_dim=1024 sparse_tokens=5
2025-08-16 17:49:05,793 - src.models.retrieval - INFO - dep=pinecone host=unknown op=query ms=463 status=OK
2025-08-16 17:49:05,793 - src.models.retrieval - INFO - dep=hybrid_search embed_ms=0 query_ms=463 total_ms=463
2025-08-16 17:49:06,113 - src.models.retrieval - INFO - dep=pinecone host=unknown op=query ms=319 status=OK
2025-08-16 17:49:06,113 - src.models.retrieval - INFO - pinecone.match type=<class 'pinecone.core.openapi.data.model.scored_vector.ScoredVector'> attrs_have_values=True has_values=True
2025-08-16 17:49:06,113 - src.models.retrieval - INFO - dep=hybrid_search embed_ms=0 query_ms=320 total_ms=320
2025-08-16 17:49:06,120 - src.models.retrieval - INFO - dep=mmr_embed used_index=7 used_cache=0 embedded=0 ms=0 n_docs=7 valid_vecs=7 q_embed_ms=0
2025-08-16 17:49:06,121 - src.models.rerank - INFO - dep=cohere_rerank payload_chars=8944 n_docs=7
2025-08-16 17:49:06,402 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-08-16 17:49:06,418 - src.models.rerank - INFO - dep=cohere_rerank host=api.cohere.com op=rerank ms=296.8 status=OK
2025-08-16 17:49:06,420 - src.models.retrieval - INFO - Retained docs preview: [{'title': 'Health Of Canadians In Changing Climate Report', 'pinecone_score': 0.280184954, 'rerank_score': 0.9995272, 'has_values': True}, {'title': 'Canadian Communities’ Guidebook For Adaptation To Climate Change Including An Ap', 'pinecone_score': 0.26793474, 'rerank_score': 0.99945575, 'has_values': True}, {'title': 'Planning To Be A Part Of My Region! Grade 9 Lesson Plans Designed For Students I', 'pinecone_score': 0.271402389, 'rerank_score': 0.9993881, 'has_values': True}, {'title': "Report For Action Toronto's Climate Change Readiness Updates Oncommitments And A", 'pinecone_score': 0.274087071, 'rerank_score': 0.99843913, 'has_values': True}, {'title': '11356 2022 Article 19718', 'pinecone_score': 0.270209789, 'rerank_score': 0.9980354, 'has_values': True}]
2025-08-16 17:49:06,420 - src.models.retrieval - INFO - q='What is climate change?', base=7, kept_pre=7, refill=0, final_before=5, final_after=5, hybrid_refill=0, floor=0.95, delta=0.100, max_sim_pre=0.280, p50_sim_pre=0.271, p95_sim_pre=0.280, blocked_base=0, dropped_top2=[]
2025-08-16 17:49:06,420 - src.models.climate_pipeline - INFO - ✓ Retrieved 5 documents
2025-08-16 17:49:06,421 - src.models.climate_pipeline - INFO - Timing: retrieval=1887.2ms
2025-08-16 17:49:06,421 - src.models.climate_pipeline - INFO - Step 6: Response Generation (Nova)
2025-08-16 17:49:06,421 - src.models.gen_response_unified - INFO - Starting nova response generation
2025-08-16 17:49:06,421 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:49:06,423 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:49:06,423 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:49:06,424 - src.models.gen_response_unified - INFO - Successfully processed 5 documents
2025-08-16 17:49:06,424 - src.models.gen_response_unified - INFO - Successfully processed 5 documents for nova
2025-08-16 17:49:12,224 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=5799 status=OK request_id=b8e9b6d8-6b19-4a42-9551-816fedf1c337
2025-08-16 17:49:12,229 - src.models.gen_response_unified - INFO - nova response cached successfully
2025-08-16 17:49:12,229 - src.models.gen_response_unified - INFO - nova response generation complete
2025-08-16 17:49:12,229 - src.models.climate_pipeline - INFO - ✓ Response generated successfully in English
2025-08-16 17:49:12,229 - src.models.climate_pipeline - INFO - Timing: generation=5808.9ms
2025-08-16 17:49:12,229 - src.models.climate_pipeline - INFO - Step 7: Quality Validation
2025-08-16 17:49:14,280 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=2049 status=OK request_id=0d029c6b-959f-408f-aa3c-22366549dab3
2025-08-16 17:49:14,280 - src.models.hallucination_guard - INFO - Faithfulness score: 0.9
2025-08-16 17:49:14,280 - src.models.climate_pipeline - INFO - ✓ Faithfulness score: 0.900
2025-08-16 17:49:14,281 - src.models.climate_pipeline - INFO - ✓ Assessment: Highly Faithful
2025-08-16 17:49:14,281 - src.models.climate_pipeline - INFO - Timing: faithfulness=2051.1ms
2025-08-16 17:49:14,281 - src.models.climate_pipeline - INFO - Step 8: Translating response to finnish (code=fi)
2025-08-16 17:49:27,528 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=13247 status=OK request_id=ec17b0fc-f1ef-4feb-a16a-b3b7f6b6cc18
2025-08-16 17:49:27,530 - src.models.climate_pipeline - INFO - ✓ Response translated successfully to finnish
2025-08-16 17:49:27,530 - src.models.climate_pipeline - INFO - Timing: translation=13249.2ms
2025-08-16 17:49:27,530 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:49:27,538 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:49:27,538 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:49:27,540 - src.models.climate_pipeline - INFO - ✓ Response cached in finnish
2025-08-16 17:49:27,541 - src.models.climate_pipeline - INFO - ✓ English version also cached
2025-08-16 17:49:27,555 - src.models.climate_pipeline - INFO - Timing summary (ms): routing=0.1 rewrite=590.4 guards=0.0 retrieval=1887.2 generation=5808.9 faithfulness=2051.1 translation=13249.2 total=24493.6
2025-08-16 17:49:27,555 - src.models.climate_pipeline - INFO - ✓ Query processed successfully in 24.49s
2025-08-16 17:49:27,556 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755380943035 time=24.520s model=nova faithfulness=0.900
2025-08-16 17:49:27,560 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=24.525s id=req_1755380943035 ip=127.0.0.1
INFO:     127.0.0.1:63185 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:49:28,775 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755380968771 query_len=31 lang=it
2025-08-16 17:49:28,776 - src.webui.api.routers.chat - INFO - Language routing: detected=it model=nova
2025-08-16 17:49:28,777 - src.models.climate_pipeline - INFO - Processing query: 'Cos'è il cambiamento climatico?...' in italian (code: it)
2025-08-16 17:49:28,777 - src.models.climate_pipeline - INFO - Raw query repr: "Cos'è il cambiamento climatico?"
2025-08-16 17:49:28,777 - src.models.climate_pipeline - INFO - Router IN → language_name=italian, language_code=it
2025-08-16 17:49:28,777 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:49:28,777 - src.models.query_routing - INFO - Language: italian (it) → Model: Nova
2025-08-16 17:49:28,777 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:49:28,777 - src.models.climate_pipeline - INFO - Router OUT → english_query='Cos'è il cambiamento climatico?'
2025-08-16 17:49:28,777 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Cos'è il cambiamento climatico?'
2025-08-16 17:49:28,777 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:49:28,777 - src.models.climate_pipeline - INFO - Timing: routing=0.3ms
2025-08-16 17:49:28,778 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:49:28,778 - src.models.query_routing - INFO - Language: italian (it) → Model: Nova
2025-08-16 17:49:28,778 - src.models.query_routing - INFO - Translating query from italian to English
2025-08-16 17:49:28,778 - src.models.query_routing - INFO - Router NET IN → query repr="Cos'è il cambiamento climatico?"
2025-08-16 17:49:29,609 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=831 status=OK request_id=606413d3-7fff-4b6b-81c9-1822f78709b4
2025-08-16 17:49:29,610 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:49:29,610 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?\n\nClimate change refers to significant changes in global temperatures and weather patterns over time. These changes can occur naturally, but the term is most often used to descr'
2025-08-16 17:49:29,610 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. These changes can occur naturally, but the term is most often used to descr'
2025-08-16 17:49:29,610 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. These changes can occur naturally, but the term is most often used to descr'
2025-08-16 17:49:29,610 - src.models.climate_pipeline - INFO - Net debug → original_query len=31, utf8_bytes=32
2025-08-16 17:49:29,610 - src.models.climate_pipeline - INFO - Net debug → english_query len=665, utf8_bytes=665
2025-08-16 17:49:29,610 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:49:29,610 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:49:29,612 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:49:29,612 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:49:29,613 - src.models.climate_pipeline - INFO - ✓ Cache hit for italian - returning cached response
2025-08-16 17:49:29,613 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755380968771 time=0.838s model=nova faithfulness=0.950
2025-08-16 17:49:29,613 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.842s id=req_1755380968771 ip=127.0.0.1
INFO:     127.0.0.1:63445 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:49:30,822 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755380970821 query_len=26 lang=pt
2025-08-16 17:49:30,822 - src.webui.api.routers.chat - INFO - Language routing: detected=pt model=nova
2025-08-16 17:49:30,823 - src.models.climate_pipeline - INFO - Processing query: 'O que é mudança climática?...' in portuguese (code: pt)
2025-08-16 17:49:30,823 - src.models.climate_pipeline - INFO - Raw query repr: 'O que é mudança climática?'
2025-08-16 17:49:30,823 - src.models.climate_pipeline - INFO - Router IN → language_name=portuguese, language_code=pt
2025-08-16 17:49:30,823 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:49:30,823 - src.models.query_routing - INFO - Language: portuguese (pt) → Model: Nova
2025-08-16 17:49:30,823 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:49:30,823 - src.models.climate_pipeline - INFO - Router OUT → english_query='O que é mudança climática?'
2025-08-16 17:49:30,823 - src.models.climate_pipeline - INFO - Router OUT → processed_query='O que é mudança climática?'
2025-08-16 17:49:30,823 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:49:30,823 - src.models.climate_pipeline - INFO - Timing: routing=0.2ms
2025-08-16 17:49:30,823 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:49:30,823 - src.models.query_routing - INFO - Language: portuguese (pt) → Model: Nova
2025-08-16 17:49:30,823 - src.models.query_routing - INFO - Translating query from portuguese to English
2025-08-16 17:49:30,823 - src.models.query_routing - INFO - Router NET IN → query repr='O que é mudança climática?'
2025-08-16 17:49:31,537 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=713 status=OK request_id=2db74c9a-0c61-4883-8a2e-68f12de4c9a6
2025-08-16 17:49:31,537 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:49:31,537 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?\n\nClimate change refers to significant changes in global temperatures and weather patterns over time. Long-term shifts in temperature and weather patterns are primarily driven b'
2025-08-16 17:49:31,537 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. Long-term shifts in temperature and weather patterns are primarily driven b'
2025-08-16 17:49:31,538 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. Long-term shifts in temperature and weather patterns are primarily driven b'
2025-08-16 17:49:31,538 - src.models.climate_pipeline - INFO - Net debug → original_query len=26, utf8_bytes=29
2025-08-16 17:49:31,538 - src.models.climate_pipeline - INFO - Net debug → english_query len=688, utf8_bytes=692
2025-08-16 17:49:31,538 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:49:31,538 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:49:31,554 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:49:31,554 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:49:31,555 - src.models.climate_pipeline - INFO - Cache miss for portuguese query
2025-08-16 17:49:31,555 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:49:31,556 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:49:31,557 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:49:31,559 - src.models.climate_pipeline - INFO - ✓ Cache hit via fuzzy match (score=0.97)
2025-08-16 17:49:31,560 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755380970821 time=0.738s model=nova faithfulness=0.950
2025-08-16 17:49:31,560 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.739s id=req_1755380970821 ip=127.0.0.1
INFO:     127.0.0.1:63466 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:49:32,846 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755380972814 query_len=19 lang=hu
2025-08-16 17:49:32,869 - src.webui.api.routers.chat - INFO - Language routing: detected=hu model=nova
2025-08-16 17:49:32,904 - src.models.climate_pipeline - INFO - Processing query: 'Mi a klímaváltozás?...' in hungarian (code: hu)
2025-08-16 17:49:32,904 - src.models.climate_pipeline - INFO - Raw query repr: 'Mi a klímaváltozás?'
2025-08-16 17:49:32,904 - src.models.climate_pipeline - INFO - Router IN → language_name=hungarian, language_code=hu
2025-08-16 17:49:32,904 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:49:32,904 - src.models.query_routing - INFO - Language: hungarian (hu) → Model: Nova
2025-08-16 17:49:32,905 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:49:32,905 - src.models.climate_pipeline - INFO - Router OUT → english_query='Mi a klímaváltozás?'
2025-08-16 17:49:32,905 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Mi a klímaváltozás?'
2025-08-16 17:49:32,905 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:49:32,906 - src.models.climate_pipeline - INFO - Timing: routing=1.3ms
2025-08-16 17:49:32,906 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:49:32,906 - src.models.query_routing - INFO - Language: hungarian (hu) → Model: Nova
2025-08-16 17:49:32,906 - src.models.query_routing - INFO - Translating query from hungarian to English
2025-08-16 17:49:32,906 - src.models.query_routing - INFO - Router NET IN → query repr='Mi a klímaváltozás?'
2025-08-16 17:49:33,506 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=599 status=OK request_id=c7c5c1e3-45f8-4a69-9f7e-6d372a04762d
2025-08-16 17:49:33,509 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:49:33,510 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?'
2025-08-16 17:49:33,510 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?'
2025-08-16 17:49:33,510 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?'
2025-08-16 17:49:33,510 - src.models.climate_pipeline - INFO - Net debug → original_query len=19, utf8_bytes=22
2025-08-16 17:49:33,510 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:49:33,510 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:49:33,510 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:49:33,660 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:49:33,660 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:49:33,752 - src.models.climate_pipeline - INFO - ✓ Cache hit for hungarian - returning cached response
2025-08-16 17:49:34,004 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755380972814 time=1.039s model=nova faithfulness=0.950
2025-08-16 17:49:34,323 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=1.509s id=req_1755380972814 ip=127.0.0.1
INFO:     127.0.0.1:63487 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:49:36,302 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755380976298 query_len=18 lang=sk
2025-08-16 17:49:36,302 - src.webui.api.routers.chat - INFO - Language routing: detected=sk model=nova
2025-08-16 17:49:36,303 - src.models.climate_pipeline - INFO - Processing query: 'Čo je zmena klímy?...' in slovak (code: sk)
2025-08-16 17:49:36,303 - src.models.climate_pipeline - INFO - Raw query repr: 'Čo je zmena klímy?'
2025-08-16 17:49:36,303 - src.models.climate_pipeline - INFO - Router IN → language_name=slovak, language_code=sk
2025-08-16 17:49:36,303 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:49:36,303 - src.models.query_routing - INFO - Language: slovak (sk) → Model: Nova
2025-08-16 17:49:36,303 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:49:36,303 - src.models.climate_pipeline - INFO - Router OUT → english_query='Čo je zmena klímy?'
2025-08-16 17:49:36,303 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Čo je zmena klímy?'
2025-08-16 17:49:36,303 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:49:36,303 - src.models.climate_pipeline - INFO - Timing: routing=0.3ms
2025-08-16 17:49:36,303 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:49:36,303 - src.models.query_routing - INFO - Language: slovak (sk) → Model: Nova
2025-08-16 17:49:36,303 - src.models.query_routing - INFO - Translating query from slovak to English
2025-08-16 17:49:36,303 - src.models.query_routing - INFO - Router NET IN → query repr='Čo je zmena klímy?'
2025-08-16 17:49:36,588 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=284 status=OK request_id=93da96f2-d186-4c76-8587-b5a4daaf2f72
2025-08-16 17:49:36,588 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:49:36,589 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?'
2025-08-16 17:49:36,589 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?'
2025-08-16 17:49:36,589 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?'
2025-08-16 17:49:36,589 - src.models.climate_pipeline - INFO - Net debug → original_query len=18, utf8_bytes=20
2025-08-16 17:49:36,589 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:49:36,589 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:49:36,589 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:49:36,743 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:49:36,744 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:49:37,329 - src.models.climate_pipeline - INFO - ✓ Cache hit for slovak - returning cached response
2025-08-16 17:49:37,638 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755380976298 time=1.336s model=nova faithfulness=0.950
2025-08-16 17:49:37,656 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=1.358s id=req_1755380976298 ip=127.0.0.1
INFO:     127.0.0.1:63518 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:49:38,899 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755380978894 query_len=26 lang=sl
2025-08-16 17:49:38,899 - src.webui.api.routers.chat - INFO - Language routing: detected=sl model=nova
2025-08-16 17:49:38,900 - src.models.climate_pipeline - INFO - Processing query: 'Kaj je podnebna sprememba?...' in slovenian (code: sl)
2025-08-16 17:49:38,900 - src.models.climate_pipeline - INFO - Raw query repr: 'Kaj je podnebna sprememba?'
2025-08-16 17:49:38,900 - src.models.climate_pipeline - INFO - Router IN → language_name=slovenian, language_code=sl
2025-08-16 17:49:38,901 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:49:38,901 - src.models.query_routing - INFO - Language: slovenian (sl) → Model: Nova
2025-08-16 17:49:38,901 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:49:38,901 - src.models.climate_pipeline - INFO - Router OUT → english_query='Kaj je podnebna sprememba?'
2025-08-16 17:49:38,901 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Kaj je podnebna sprememba?'
2025-08-16 17:49:38,901 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:49:38,901 - src.models.climate_pipeline - INFO - Timing: routing=0.4ms
2025-08-16 17:49:38,901 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:49:38,901 - src.models.query_routing - INFO - Language: slovenian (sl) → Model: Nova
2025-08-16 17:49:38,901 - src.models.query_routing - INFO - Translating query from slovenian to English
2025-08-16 17:49:38,901 - src.models.query_routing - INFO - Router NET IN → query repr='Kaj je podnebna sprememba?'
2025-08-16 17:49:39,582 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=680 status=OK request_id=8edeed22-e8d1-4d62-97f7-1005a563ad5d
2025-08-16 17:49:39,585 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:49:39,585 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?\n\nClimate change refers to significant changes in global temperatures and weather patterns over time. While climate variability is a natural phenomenon, the term "climate change'
2025-08-16 17:49:39,585 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate variability is a natural phenomenon, the term "climate change'
2025-08-16 17:49:39,585 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate variability is a natural phenomenon, the term "climate change'
2025-08-16 17:49:39,585 - src.models.climate_pipeline - INFO - Net debug → original_query len=26, utf8_bytes=26
2025-08-16 17:49:39,585 - src.models.climate_pipeline - INFO - Net debug → english_query len=612, utf8_bytes=618
2025-08-16 17:49:39,585 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:49:39,586 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:49:39,597 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:49:39,598 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:49:39,600 - src.models.climate_pipeline - INFO - Cache miss for slovenian query
2025-08-16 17:49:39,601 - src.models.climate_pipeline - INFO - Timing: cache=15.7ms
2025-08-16 17:49:39,601 - src.models.climate_pipeline - INFO - Step 3: Query Rewriting
2025-08-16 17:49:39,601 - src.models.conversation_parser - INFO - No conversation history to format
2025-08-16 17:49:39,601 - src.models.climate_pipeline - INFO - Rewriter IN → expected_lang=sl, history_len=0
2025-08-16 17:49:39,601 - src.models.climate_pipeline - INFO - Rewriter IN → original_query='Kaj je podnebna sprememba?'
2025-08-16 17:49:39,602 - query_rewriter - INFO - Rewriter NET IN → expected_lang=sl, user_query repr='Kaj je podnebna sprememba?', norm='Kaj je podnebna sprememba?'
2025-08-16 17:49:40,165 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=562 status=OK request_id=28f6cccd-236c-4385-8b13-948375ced18f
2025-08-16 17:49:40,166 - query_rewriter - INFO - Model raw (first 300): {"reason":"User query is in Slovenian and asks about climate change.","language":"sl","expected_language":"sl","language_match":true,"classification":"on-topic","rewrite_en":"What is climate change?","ask_how_to_use":false,"how_it_works":null,"error":null}
2025-08-16 17:49:40,166 - query_rewriter - INFO - Rewriter NET OUT → json keys=['ask_how_to_use', 'classification', 'error', 'expected_language', 'how_it_works', 'language', 'language_match', 'reason', 'rewrite_en']
2025-08-16 17:49:40,166 - query_rewriter - INFO - 🔍 CLASSIFICATION_DEBUG: query='Kaj je podnebna sprememba?...' expected_lang=sl detected_lang=sl classification=on-topic language_match=True reason='User query is in Slovenian and asks about climate change....'
2025-08-16 17:49:40,167 - src.models.climate_pipeline - INFO - Rewriter OUT → detected_lang='sl', classification='on-topic', language_match='yes', canned=False
2025-08-16 17:49:40,167 - src.models.climate_pipeline - INFO - Rewriter OUT → rewrite_en='What is climate change?'
2025-08-16 17:49:40,167 - src.models.climate_pipeline - INFO - ✓ Query rewritten (JSON) for better retrieval
2025-08-16 17:49:40,167 - src.models.climate_pipeline - INFO - Timing: rewrite=565.6ms
2025-08-16 17:49:40,167 - src.models.climate_pipeline - INFO - Step 4: Input Guards
2025-08-16 17:49:40,167 - src.models.climate_pipeline - INFO - ✓ Input guards passed
2025-08-16 17:49:40,167 - src.models.climate_pipeline - INFO - Timing: guards=0.1ms
2025-08-16 17:49:40,167 - src.models.climate_pipeline - INFO - Step 5: Document Retrieval
2025-08-16 17:49:40,167 - src.models.retrieval - INFO - 🔄 Pre-computing query embeddings to avoid redundant encode() calls
2025-08-16 17:49:40,167 - src.models.retrieval - INFO - Query embedding IN: query_len=23 chars, query_repr='What is climate change?...'
2025-08-16 17:49:40,876 - src.models.retrieval - INFO - dep=query_embed op=encode ms=708 dense_dim=1024 sparse_tokens=5
2025-08-16 17:49:40,965 - src.models.retrieval - INFO - dep=pinecone host=unknown op=query ms=87 status=OK
2025-08-16 17:49:40,965 - src.models.retrieval - INFO - dep=hybrid_search embed_ms=0 query_ms=88 total_ms=88
2025-08-16 17:49:41,215 - src.models.retrieval - INFO - dep=pinecone host=unknown op=query ms=249 status=OK
2025-08-16 17:49:41,215 - src.models.retrieval - INFO - pinecone.match type=<class 'pinecone.core.openapi.data.model.scored_vector.ScoredVector'> attrs_have_values=True has_values=True
2025-08-16 17:49:41,215 - src.models.retrieval - INFO - dep=hybrid_search embed_ms=0 query_ms=249 total_ms=249
2025-08-16 17:49:41,219 - src.models.retrieval - INFO - dep=mmr_embed used_index=7 used_cache=0 embedded=0 ms=0 n_docs=7 valid_vecs=7 q_embed_ms=0
2025-08-16 17:49:41,221 - src.models.rerank - INFO - dep=cohere_rerank payload_chars=8944 n_docs=7
2025-08-16 17:49:41,667 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-08-16 17:49:41,685 - src.models.rerank - INFO - dep=cohere_rerank host=api.cohere.com op=rerank ms=463.9 status=OK
2025-08-16 17:49:41,686 - src.models.retrieval - INFO - Retained docs preview: [{'title': 'Health Of Canadians In Changing Climate Report', 'pinecone_score': 0.280184954, 'rerank_score': 0.9995272, 'has_values': True}, {'title': 'Canadian Communities’ Guidebook For Adaptation To Climate Change Including An Ap', 'pinecone_score': 0.26793474, 'rerank_score': 0.99945575, 'has_values': True}, {'title': 'Planning To Be A Part Of My Region! Grade 9 Lesson Plans Designed For Students I', 'pinecone_score': 0.271402389, 'rerank_score': 0.9993881, 'has_values': True}, {'title': "Report For Action Toronto's Climate Change Readiness Updates Oncommitments And A", 'pinecone_score': 0.274087071, 'rerank_score': 0.99843913, 'has_values': True}, {'title': '11356 2022 Article 19718', 'pinecone_score': 0.270209789, 'rerank_score': 0.9980354, 'has_values': True}]
2025-08-16 17:49:41,686 - src.models.retrieval - INFO - q='What is climate change?', base=7, kept_pre=7, refill=0, final_before=5, final_after=5, hybrid_refill=0, floor=0.95, delta=0.100, max_sim_pre=0.280, p50_sim_pre=0.271, p95_sim_pre=0.280, blocked_base=0, dropped_top2=[]
2025-08-16 17:49:41,686 - src.models.climate_pipeline - INFO - ✓ Retrieved 5 documents
2025-08-16 17:49:41,686 - src.models.climate_pipeline - INFO - Timing: retrieval=1518.8ms
2025-08-16 17:49:41,686 - src.models.climate_pipeline - INFO - Step 6: Response Generation (Nova)
2025-08-16 17:49:41,686 - src.models.gen_response_unified - INFO - Starting nova response generation
2025-08-16 17:49:41,686 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:49:41,695 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:49:41,695 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:49:41,696 - src.models.gen_response_unified - INFO - Cache hit for nova - returning cached response
2025-08-16 17:49:41,696 - src.models.climate_pipeline - INFO - ✓ Response generated successfully in English
2025-08-16 17:49:41,696 - src.models.climate_pipeline - INFO - Timing: generation=9.7ms
2025-08-16 17:49:41,696 - src.models.climate_pipeline - INFO - Step 7: Quality Validation
2025-08-16 17:49:43,435 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=1738 status=OK request_id=913c1a71-9a64-43a8-918f-21e05cceefdc
2025-08-16 17:49:43,436 - src.models.hallucination_guard - INFO - Faithfulness score: 0.9
2025-08-16 17:49:43,436 - src.models.climate_pipeline - INFO - ✓ Faithfulness score: 0.900
2025-08-16 17:49:43,436 - src.models.climate_pipeline - INFO - ✓ Assessment: Highly Faithful
2025-08-16 17:49:43,436 - src.models.climate_pipeline - INFO - Timing: faithfulness=1740.4ms
2025-08-16 17:49:43,437 - src.models.climate_pipeline - INFO - Step 8: Translating response to slovenian (code=sl)
2025-08-16 17:49:54,261 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=10823 status=OK request_id=612b1606-dabf-4059-8862-859f59525ce8
2025-08-16 17:49:54,264 - src.models.climate_pipeline - INFO - ✓ Response translated successfully to slovenian
2025-08-16 17:49:54,264 - src.models.climate_pipeline - INFO - Timing: translation=10827.5ms
2025-08-16 17:49:54,265 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:49:54,281 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:49:54,281 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:49:54,285 - src.models.climate_pipeline - INFO - ✓ Response cached in slovenian
2025-08-16 17:49:54,286 - src.models.climate_pipeline - INFO - ✓ English version also cached
2025-08-16 17:49:54,287 - src.models.climate_pipeline - INFO - Timing summary (ms): routing=0.4 rewrite=565.6 guards=0.1 retrieval=1518.8 generation=9.7 faithfulness=1740.4 translation=10827.5 total=15364.1
2025-08-16 17:49:54,287 - src.models.climate_pipeline - INFO - ✓ Query processed successfully in 15.36s
2025-08-16 17:49:54,288 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755380978894 time=15.389s model=nova faithfulness=0.900
2025-08-16 17:49:54,290 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=15.396s id=req_1755380978894 ip=127.0.0.1
INFO:     127.0.0.1:63546 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:49:55,509 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755380995505 query_len=31 lang=bg
2025-08-16 17:49:55,510 - src.webui.api.routers.chat - INFO - Language routing: detected=bg model=nova
2025-08-16 17:49:55,514 - src.models.climate_pipeline - INFO - Processing query: 'Какво е изменението на климата?...' in bulgarian (code: bg)
2025-08-16 17:49:55,514 - src.models.climate_pipeline - INFO - Raw query repr: 'Какво е изменението на климата?'
2025-08-16 17:49:55,514 - src.models.climate_pipeline - INFO - Router IN → language_name=bulgarian, language_code=bg
2025-08-16 17:49:55,514 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:49:55,514 - src.models.query_routing - INFO - Language: bulgarian (bg) → Model: Nova
2025-08-16 17:49:55,515 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:49:55,515 - src.models.climate_pipeline - INFO - Router OUT → english_query='Какво е изменението на климата?'
2025-08-16 17:49:55,515 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Какво е изменението на климата?'
2025-08-16 17:49:55,515 - src.models.climate_pipeline - WARNING - Router language mismatch: query is in Russian but Bulgarian was selected
2025-08-16 17:49:55,515 - src.models.climate_pipeline - INFO - Proceeding despite router mismatch (soft warning only)
2025-08-16 17:49:55,515 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:49:55,515 - src.models.climate_pipeline - INFO - Timing: routing=0.3ms
2025-08-16 17:49:55,515 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:49:55,515 - src.models.query_routing - INFO - Language: bulgarian (bg) → Model: Nova
2025-08-16 17:49:55,515 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='Какво е изменението на климата?'
2025-08-16 17:49:55,515 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='Какво е изменението на климата?'
2025-08-16 17:49:55,515 - src.models.climate_pipeline - INFO - Net debug → original_query len=31, utf8_bytes=57
2025-08-16 17:49:55,515 - src.models.climate_pipeline - INFO - Net debug → english_query len=31, utf8_bytes=57
2025-08-16 17:49:55,515 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:49:55,515 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:49:55,516 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:49:55,516 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:49:55,517 - src.models.climate_pipeline - INFO - ✓ Cache hit for bulgarian - returning cached response
2025-08-16 17:49:55,517 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755380995505 time=0.009s model=nova faithfulness=0.950
2025-08-16 17:49:55,518 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.013s id=req_1755380995505 ip=127.0.0.1
INFO:     127.0.0.1:63700 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:49:56,731 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755380996726 query_len=22 lang=hr
2025-08-16 17:49:56,731 - src.webui.api.routers.chat - INFO - Language routing: detected=hr model=nova
2025-08-16 17:49:56,732 - src.models.climate_pipeline - INFO - Processing query: 'Što je promjena klime?...' in croatian (code: hr)
2025-08-16 17:49:56,732 - src.models.climate_pipeline - INFO - Raw query repr: 'Što je promjena klime?'
2025-08-16 17:49:56,732 - src.models.climate_pipeline - INFO - Router IN → language_name=croatian, language_code=hr
2025-08-16 17:49:56,732 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:49:56,732 - src.models.query_routing - INFO - Language: croatian (hr) → Model: Nova
2025-08-16 17:49:56,732 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:49:56,732 - src.models.climate_pipeline - INFO - Router OUT → english_query='Što je promjena klime?'
2025-08-16 17:49:56,732 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Što je promjena klime?'
2025-08-16 17:49:56,732 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:49:56,732 - src.models.climate_pipeline - INFO - Timing: routing=0.5ms
2025-08-16 17:49:56,733 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:49:56,733 - src.models.query_routing - INFO - Language: croatian (hr) → Model: Nova
2025-08-16 17:49:56,733 - src.models.query_routing - INFO - Translating query from croatian to English
2025-08-16 17:49:56,733 - src.models.query_routing - INFO - Router NET IN → query repr='Što je promjena klime?'
2025-08-16 17:49:57,414 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=680 status=OK request_id=299bba01-4374-4c30-aac6-ae071fb14d9e
2025-08-16 17:49:57,414 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:49:57,414 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?\n\nClimate change refers to significant changes in global temperatures and weather patterns over time. These changes can occur naturally, but the term is most often used to descr'
2025-08-16 17:49:57,414 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. These changes can occur naturally, but the term is most often used to descr'
2025-08-16 17:49:57,414 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. These changes can occur naturally, but the term is most often used to descr'
2025-08-16 17:49:57,415 - src.models.climate_pipeline - INFO - Net debug → original_query len=22, utf8_bytes=23
2025-08-16 17:49:57,415 - src.models.climate_pipeline - INFO - Net debug → english_query len=559, utf8_bytes=559
2025-08-16 17:49:57,415 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:49:57,415 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:49:57,416 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:49:57,417 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:49:57,417 - src.models.climate_pipeline - INFO - Cache miss for croatian query
2025-08-16 17:49:57,418 - src.models.climate_pipeline - INFO - Timing: cache=2.9ms
2025-08-16 17:49:57,418 - src.models.climate_pipeline - INFO - Step 3: Query Rewriting
2025-08-16 17:49:57,418 - src.models.conversation_parser - INFO - No conversation history to format
2025-08-16 17:49:57,418 - src.models.climate_pipeline - INFO - Rewriter IN → expected_lang=hr, history_len=0
2025-08-16 17:49:57,418 - src.models.climate_pipeline - INFO - Rewriter IN → original_query='Što je promjena klime?'
2025-08-16 17:49:57,418 - query_rewriter - INFO - Rewriter NET IN → expected_lang=hr, user_query repr='Što je promjena klime?', norm='Što je promjena klime?'
2025-08-16 17:49:58,072 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=654 status=OK request_id=0057b79d-f027-4fd6-a485-e9f575fba99a
2025-08-16 17:49:58,073 - query_rewriter - INFO - Model raw (first 300): {"reason":"User query is in Croatian and asks about climate change.","language":"hr","expected_language":"hr","language_match":true,"classification":"on-topic","rewrite_en":"What is climate change?","ask_how_to_use":false,"how_it_works":null,"error":null}
2025-08-16 17:49:58,074 - query_rewriter - INFO - Rewriter NET OUT → json keys=['ask_how_to_use', 'classification', 'error', 'expected_language', 'how_it_works', 'language', 'language_match', 'reason', 'rewrite_en']
2025-08-16 17:49:58,074 - query_rewriter - INFO - 🔍 CLASSIFICATION_DEBUG: query='Što je promjena klime?...' expected_lang=hr detected_lang=hr classification=on-topic language_match=True reason='User query is in Croatian and asks about climate change....'
2025-08-16 17:49:58,074 - src.models.climate_pipeline - INFO - Rewriter OUT → detected_lang='hr', classification='on-topic', language_match='yes', canned=False
2025-08-16 17:49:58,074 - src.models.climate_pipeline - INFO - Rewriter OUT → rewrite_en='What is climate change?'
2025-08-16 17:49:58,074 - src.models.climate_pipeline - INFO - ✓ Query rewritten (JSON) for better retrieval
2025-08-16 17:49:58,075 - src.models.climate_pipeline - INFO - Timing: rewrite=656.8ms
2025-08-16 17:49:58,075 - src.models.climate_pipeline - INFO - Step 4: Input Guards
2025-08-16 17:49:58,075 - src.models.climate_pipeline - INFO - ✓ Input guards passed
2025-08-16 17:49:58,075 - src.models.climate_pipeline - INFO - Timing: guards=0.1ms
2025-08-16 17:49:58,075 - src.models.climate_pipeline - INFO - Step 5: Document Retrieval
2025-08-16 17:49:58,075 - src.models.retrieval - INFO - 🔄 Pre-computing query embeddings to avoid redundant encode() calls
2025-08-16 17:49:58,075 - src.models.retrieval - INFO - Query embedding IN: query_len=23 chars, query_repr='What is climate change?...'
2025-08-16 17:49:58,751 - src.models.retrieval - INFO - dep=query_embed op=encode ms=675 dense_dim=1024 sparse_tokens=5
2025-08-16 17:49:58,898 - src.models.retrieval - INFO - dep=pinecone host=unknown op=query ms=145 status=OK
2025-08-16 17:49:58,898 - src.models.retrieval - INFO - dep=hybrid_search embed_ms=0 query_ms=146 total_ms=146
2025-08-16 17:49:59,201 - src.models.retrieval - INFO - dep=pinecone host=unknown op=query ms=303 status=OK
2025-08-16 17:49:59,201 - src.models.retrieval - INFO - pinecone.match type=<class 'pinecone.core.openapi.data.model.scored_vector.ScoredVector'> attrs_have_values=True has_values=True
2025-08-16 17:49:59,201 - src.models.retrieval - INFO - dep=hybrid_search embed_ms=0 query_ms=303 total_ms=303
2025-08-16 17:49:59,204 - src.models.retrieval - INFO - dep=mmr_embed used_index=7 used_cache=0 embedded=0 ms=0 n_docs=7 valid_vecs=7 q_embed_ms=0
2025-08-16 17:49:59,204 - src.models.rerank - INFO - dep=cohere_rerank payload_chars=8944 n_docs=7
2025-08-16 17:49:59,343 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-08-16 17:49:59,359 - src.models.rerank - INFO - dep=cohere_rerank host=api.cohere.com op=rerank ms=154.4 status=OK
2025-08-16 17:49:59,359 - src.models.retrieval - INFO - Retained docs preview: [{'title': 'Health Of Canadians In Changing Climate Report', 'pinecone_score': 0.280184954, 'rerank_score': 0.9995272, 'has_values': True}, {'title': 'Canadian Communities’ Guidebook For Adaptation To Climate Change Including An Ap', 'pinecone_score': 0.26793474, 'rerank_score': 0.99945575, 'has_values': True}, {'title': 'Planning To Be A Part Of My Region! Grade 9 Lesson Plans Designed For Students I', 'pinecone_score': 0.271402389, 'rerank_score': 0.9993881, 'has_values': True}, {'title': "Report For Action Toronto's Climate Change Readiness Updates Oncommitments And A", 'pinecone_score': 0.274087071, 'rerank_score': 0.99843913, 'has_values': True}, {'title': '11356 2022 Article 19718', 'pinecone_score': 0.270209789, 'rerank_score': 0.9980354, 'has_values': True}]
2025-08-16 17:49:59,360 - src.models.retrieval - INFO - q='What is climate change?', base=7, kept_pre=7, refill=0, final_before=5, final_after=5, hybrid_refill=0, floor=0.95, delta=0.100, max_sim_pre=0.280, p50_sim_pre=0.271, p95_sim_pre=0.280, blocked_base=0, dropped_top2=[]
2025-08-16 17:49:59,360 - src.models.climate_pipeline - INFO - ✓ Retrieved 5 documents
2025-08-16 17:49:59,360 - src.models.climate_pipeline - INFO - Timing: retrieval=1284.7ms
2025-08-16 17:49:59,360 - src.models.climate_pipeline - INFO - Step 6: Response Generation (Nova)
2025-08-16 17:49:59,360 - src.models.gen_response_unified - INFO - Starting nova response generation
2025-08-16 17:49:59,360 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:49:59,361 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:49:59,361 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:49:59,362 - src.models.gen_response_unified - INFO - Cache hit for nova - returning cached response
2025-08-16 17:49:59,362 - src.models.climate_pipeline - INFO - ✓ Response generated successfully in English
2025-08-16 17:49:59,362 - src.models.climate_pipeline - INFO - Timing: generation=2.3ms
2025-08-16 17:49:59,362 - src.models.climate_pipeline - INFO - Step 7: Quality Validation
2025-08-16 17:50:00,427 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=1064 status=OK request_id=475db9d1-ef6f-4cae-9549-5d31e38c0ff9
2025-08-16 17:50:00,427 - src.models.hallucination_guard - INFO - Faithfulness score: 0.9
2025-08-16 17:50:00,427 - src.models.climate_pipeline - INFO - ✓ Faithfulness score: 0.900
2025-08-16 17:50:00,427 - src.models.climate_pipeline - INFO - ✓ Assessment: Highly Faithful
2025-08-16 17:50:00,427 - src.models.climate_pipeline - INFO - Timing: faithfulness=1065.1ms
2025-08-16 17:50:00,427 - src.models.climate_pipeline - INFO - Step 8: Translating response to croatian (code=hr)
2025-08-16 17:50:10,696 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=10268 status=OK request_id=4e93b296-0e7b-4b15-8663-29652f653ea2
2025-08-16 17:50:10,698 - src.models.climate_pipeline - INFO - ✓ Response translated successfully to croatian
2025-08-16 17:50:10,698 - src.models.climate_pipeline - INFO - Timing: translation=10270.8ms
2025-08-16 17:50:10,699 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:50:10,702 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:50:10,702 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:50:10,703 - src.models.climate_pipeline - INFO - ✓ Response cached in croatian
2025-08-16 17:50:10,705 - src.models.climate_pipeline - INFO - ✓ English version also cached
2025-08-16 17:50:10,706 - src.models.climate_pipeline - INFO - Timing summary (ms): routing=0.5 rewrite=656.8 guards=0.1 retrieval=1284.7 generation=2.3 faithfulness=1065.1 translation=10270.8 total=13966.4
2025-08-16 17:50:10,706 - src.models.climate_pipeline - INFO - ✓ Query processed successfully in 13.97s
2025-08-16 17:50:10,708 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755380996726 time=13.977s model=nova faithfulness=0.900
2025-08-16 17:50:10,711 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=13.984s id=req_1755380996726 ip=127.0.0.1
INFO:     127.0.0.1:63713 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:19,539 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381319527 query_len=18 lang=ar
2025-08-16 17:55:19,540 - src.webui.api.routers.chat - INFO - Language routing: detected=ar model=command_a
2025-08-16 17:55:19,541 - src.models.climate_pipeline - INFO - Processing query: 'ما هو تغير المناخ؟...' in arabic (code: ar)
2025-08-16 17:55:19,541 - src.models.climate_pipeline - INFO - Raw query repr: 'ما هو تغير المناخ؟'
2025-08-16 17:55:19,541 - src.models.climate_pipeline - INFO - Router IN → language_name=arabic, language_code=ar
2025-08-16 17:55:19,541 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:19,541 - src.models.query_routing - INFO - Language: arabic (ar) → Model: Command-A
2025-08-16 17:55:19,541 - src.models.climate_pipeline - INFO - Router OUT → model=Command-A, support=command_a, needs_translation=True
2025-08-16 17:55:19,541 - src.models.climate_pipeline - INFO - Router OUT → english_query='ما هو تغير المناخ؟'
2025-08-16 17:55:19,542 - src.models.climate_pipeline - INFO - Router OUT → processed_query='ما هو تغير المناخ؟'
2025-08-16 17:55:19,542 - src.models.climate_pipeline - INFO - ✓ Routed to Command-A model
2025-08-16 17:55:19,542 - src.models.climate_pipeline - INFO - Timing: routing=0.2ms
2025-08-16 17:55:19,542 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Command-A
2025-08-16 17:55:19,542 - src.models.query_routing - INFO - Language: arabic (ar) → Model: Command-A
2025-08-16 17:55:19,542 - src.models.query_routing - INFO - Translating query from arabic to English
2025-08-16 17:55:19,542 - src.models.query_routing - INFO - Router NET IN → query repr='ما هو تغير المناخ؟'
2025-08-16 17:55:19,878 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/chat "HTTP/1.1 200 OK"
2025-08-16 17:55:19,896 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:55:19,896 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?'
2025-08-16 17:55:19,896 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?'
2025-08-16 17:55:19,896 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?'
2025-08-16 17:55:19,896 - src.models.climate_pipeline - INFO - Net debug → original_query len=18, utf8_bytes=33
2025-08-16 17:55:19,896 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:55:19,896 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:19,896 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:19,898 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:19,898 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:19,900 - src.models.climate_pipeline - INFO - ✓ Cache hit for arabic - returning cached response
2025-08-16 17:55:19,900 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381319527 time=0.362s model=command_a faithfulness=0.950
2025-08-16 17:55:19,901 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.374s id=req_1755381319527 ip=127.0.0.1
INFO:     127.0.0.1:50205 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:20,920 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381320918 query_len=20 lang=bn
2025-08-16 17:55:20,920 - src.webui.api.routers.chat - INFO - Language routing: detected=bn model=command_a
2025-08-16 17:55:20,920 - src.models.climate_pipeline - INFO - Processing query: 'জলবায়ু পরিবর্তন কি?...' in bengali (code: bn)
2025-08-16 17:55:20,920 - src.models.climate_pipeline - INFO - Raw query repr: 'জলবায়ু পরিবর্তন কি?'
2025-08-16 17:55:20,920 - src.models.climate_pipeline - INFO - Router IN → language_name=bengali, language_code=bn
2025-08-16 17:55:20,920 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:20,921 - src.models.query_routing - INFO - Language: bengali (bn) → Model: Command-A
2025-08-16 17:55:20,924 - src.models.climate_pipeline - INFO - Router OUT → model=Command-A, support=command_a, needs_translation=True
2025-08-16 17:55:20,924 - src.models.climate_pipeline - INFO - Router OUT → english_query='জলবায়ু পরিবর্তন কি?'
2025-08-16 17:55:20,924 - src.models.climate_pipeline - INFO - Router OUT → processed_query='জলবায়ু পরিবর্তন কি?'
2025-08-16 17:55:20,924 - src.models.climate_pipeline - INFO - ✓ Routed to Command-A model
2025-08-16 17:55:20,924 - src.models.climate_pipeline - INFO - Timing: routing=3.3ms
2025-08-16 17:55:20,924 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Command-A
2025-08-16 17:55:20,924 - src.models.query_routing - INFO - Language: bengali (bn) → Model: Command-A
2025-08-16 17:55:20,924 - src.models.query_routing - INFO - Translating query from bengali to English
2025-08-16 17:55:20,924 - src.models.query_routing - INFO - Router NET IN → query repr='জলবায়ু পরিবর্তন কি?'
2025-08-16 17:55:21,128 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/chat "HTTP/1.1 200 OK"
2025-08-16 17:55:21,132 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:55:21,132 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?'
2025-08-16 17:55:21,132 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?'
2025-08-16 17:55:21,132 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?'
2025-08-16 17:55:21,132 - src.models.climate_pipeline - INFO - Net debug → original_query len=20, utf8_bytes=54
2025-08-16 17:55:21,132 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:55:21,132 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:21,132 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:21,134 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:21,134 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:21,140 - src.models.climate_pipeline - INFO - ✓ Cache hit for bengali - returning cached response
2025-08-16 17:55:21,140 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381320918 time=0.221s model=command_a faithfulness=0.950
2025-08-16 17:55:21,141 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.223s id=req_1755381320918 ip=127.0.0.1
INFO:     127.0.0.1:50221 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:22,158 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381322155 query_len=8 lang=zh
2025-08-16 17:55:22,159 - src.webui.api.routers.chat - INFO - Language routing: detected=zh model=command_a
2025-08-16 17:55:22,159 - src.models.climate_pipeline - INFO - Processing query: '什么是气候变化？...' in chinese (code: zh)
2025-08-16 17:55:22,159 - src.models.climate_pipeline - INFO - Raw query repr: '什么是气候变化？'
2025-08-16 17:55:22,161 - src.models.climate_pipeline - INFO - Router IN → language_name=chinese, language_code=zh
2025-08-16 17:55:22,161 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:22,161 - src.models.query_routing - INFO - Language: chinese (zh) → Model: Command-A
2025-08-16 17:55:22,161 - src.models.climate_pipeline - INFO - Router OUT → model=Command-A, support=command_a, needs_translation=True
2025-08-16 17:55:22,161 - src.models.climate_pipeline - INFO - Router OUT → english_query='什么是气候变化？'
2025-08-16 17:55:22,161 - src.models.climate_pipeline - INFO - Router OUT → processed_query='什么是气候变化？'
2025-08-16 17:55:22,162 - src.models.climate_pipeline - INFO - ✓ Routed to Command-A model
2025-08-16 17:55:22,162 - src.models.climate_pipeline - INFO - Timing: routing=0.5ms
2025-08-16 17:55:22,162 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Command-A
2025-08-16 17:55:22,162 - src.models.query_routing - INFO - Language: chinese (zh) → Model: Command-A
2025-08-16 17:55:22,162 - src.models.query_routing - INFO - Translating query from chinese to English
2025-08-16 17:55:22,162 - src.models.query_routing - INFO - Router NET IN → query repr='什么是气候变化？'
2025-08-16 17:55:22,355 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/chat "HTTP/1.1 200 OK"
2025-08-16 17:55:22,357 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:55:22,357 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?'
2025-08-16 17:55:22,357 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?'
2025-08-16 17:55:22,357 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?'
2025-08-16 17:55:22,357 - src.models.climate_pipeline - INFO - Net debug → original_query len=8, utf8_bytes=24
2025-08-16 17:55:22,357 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:55:22,357 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:22,357 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:22,359 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:22,359 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:22,361 - src.models.climate_pipeline - INFO - ✓ Cache hit for chinese - returning cached response
2025-08-16 17:55:22,361 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381322155 time=0.203s model=command_a faithfulness=0.950
2025-08-16 17:55:22,363 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.207s id=req_1755381322155 ip=127.0.0.1
INFO:     127.0.0.1:50233 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:23,381 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381323380 query_len=23 lang=tl
2025-08-16 17:55:23,381 - src.webui.api.routers.chat - INFO - Language routing: detected=tl model=command_a
2025-08-16 17:55:23,382 - src.models.climate_pipeline - INFO - Processing query: 'Ano ang climate change?...' in tagalog (code: tl)
2025-08-16 17:55:23,382 - src.models.climate_pipeline - INFO - Raw query repr: 'Ano ang climate change?'
2025-08-16 17:55:23,382 - src.models.climate_pipeline - INFO - Router IN → language_name=tagalog, language_code=tl
2025-08-16 17:55:23,382 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:23,382 - src.models.query_routing - INFO - Language: tagalog (tl) → Model: Command-A
2025-08-16 17:55:23,382 - src.models.climate_pipeline - INFO - Router OUT → model=Command-A, support=command_a, needs_translation=True
2025-08-16 17:55:23,382 - src.models.climate_pipeline - INFO - Router OUT → english_query='Ano ang climate change?'
2025-08-16 17:55:23,382 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Ano ang climate change?'
2025-08-16 17:55:23,382 - src.models.climate_pipeline - INFO - ✓ Routed to Command-A model
2025-08-16 17:55:23,382 - src.models.climate_pipeline - INFO - Timing: routing=0.2ms
2025-08-16 17:55:23,382 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Command-A
2025-08-16 17:55:23,382 - src.models.query_routing - INFO - Language: tagalog (tl) → Model: Command-A
2025-08-16 17:55:23,382 - src.models.query_routing - INFO - Translating query from tagalog to English
2025-08-16 17:55:23,382 - src.models.query_routing - INFO - Router NET IN → query repr='Ano ang climate change?'
2025-08-16 17:55:23,601 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/chat "HTTP/1.1 200 OK"
2025-08-16 17:55:23,603 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:55:23,603 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?'
2025-08-16 17:55:23,603 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?'
2025-08-16 17:55:23,603 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?'
2025-08-16 17:55:23,603 - src.models.climate_pipeline - INFO - Net debug → original_query len=23, utf8_bytes=23
2025-08-16 17:55:23,604 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:55:23,604 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:23,604 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:23,606 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:23,606 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:23,608 - src.models.climate_pipeline - INFO - ✓ Cache hit for tagalog - returning cached response
2025-08-16 17:55:23,609 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381323380 time=0.227s model=command_a faithfulness=0.950
2025-08-16 17:55:23,610 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.230s id=req_1755381323380 ip=127.0.0.1
INFO:     127.0.0.1:50248 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:24,617 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381324616 query_len=39 lang=fr
2025-08-16 17:55:24,617 - src.webui.api.routers.chat - INFO - Language routing: detected=fr model=command_a
2025-08-16 17:55:24,617 - src.models.climate_pipeline - INFO - Processing query: 'Qu'est-ce que le changement climatique?...' in french (code: fr)
2025-08-16 17:55:24,617 - src.models.climate_pipeline - INFO - Raw query repr: "Qu'est-ce que le changement climatique?"
2025-08-16 17:55:24,617 - src.models.climate_pipeline - INFO - Router IN → language_name=french, language_code=fr
2025-08-16 17:55:24,617 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:24,617 - src.models.query_routing - INFO - Language: french (fr) → Model: Command-A
2025-08-16 17:55:24,617 - src.models.climate_pipeline - INFO - Router OUT → model=Command-A, support=command_a, needs_translation=True
2025-08-16 17:55:24,617 - src.models.climate_pipeline - INFO - Router OUT → english_query='Qu'est-ce que le changement climatique?'
2025-08-16 17:55:24,617 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Qu'est-ce que le changement climatique?'
2025-08-16 17:55:24,617 - src.models.climate_pipeline - INFO - ✓ Routed to Command-A model
2025-08-16 17:55:24,617 - src.models.climate_pipeline - INFO - Timing: routing=0.1ms
2025-08-16 17:55:24,617 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Command-A
2025-08-16 17:55:24,617 - src.models.query_routing - INFO - Language: french (fr) → Model: Command-A
2025-08-16 17:55:24,617 - src.models.query_routing - INFO - Translating query from french to English
2025-08-16 17:55:24,617 - src.models.query_routing - INFO - Router NET IN → query repr="Qu'est-ce que le changement climatique?"
2025-08-16 17:55:24,824 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/chat "HTTP/1.1 200 OK"
2025-08-16 17:55:24,825 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:55:24,825 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?'
2025-08-16 17:55:24,825 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?'
2025-08-16 17:55:24,825 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?'
2025-08-16 17:55:24,825 - src.models.climate_pipeline - INFO - Net debug → original_query len=39, utf8_bytes=39
2025-08-16 17:55:24,825 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:55:24,825 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:24,825 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:24,827 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:24,827 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:24,828 - src.models.climate_pipeline - INFO - ✓ Cache hit for french - returning cached response
2025-08-16 17:55:24,828 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381324616 time=0.211s model=command_a faithfulness=0.950
2025-08-16 17:55:24,828 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.212s id=req_1755381324616 ip=127.0.0.1
INFO:     127.0.0.1:50259 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:25,840 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381325838 query_len=23 lang=gu
2025-08-16 17:55:25,840 - src.webui.api.routers.chat - INFO - Language routing: detected=gu model=command_a
2025-08-16 17:55:25,840 - src.models.climate_pipeline - INFO - Processing query: 'આબોહવા પરિવર્તન શું છે?...' in gujarati (code: gu)
2025-08-16 17:55:25,840 - src.models.climate_pipeline - INFO - Raw query repr: 'આબોહવા પરિવર્તન શું છે?'
2025-08-16 17:55:25,841 - src.models.climate_pipeline - INFO - Router IN → language_name=gujarati, language_code=gu
2025-08-16 17:55:25,841 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:25,841 - src.models.query_routing - INFO - Language: gujarati (gu) → Model: Command-A
2025-08-16 17:55:25,841 - src.models.climate_pipeline - INFO - Router OUT → model=Command-A, support=command_a, needs_translation=True
2025-08-16 17:55:25,841 - src.models.climate_pipeline - INFO - Router OUT → english_query='આબોહવા પરિવર્તન શું છે?'
2025-08-16 17:55:25,841 - src.models.climate_pipeline - INFO - Router OUT → processed_query='આબોહવા પરિવર્તન શું છે?'
2025-08-16 17:55:25,841 - src.models.climate_pipeline - INFO - ✓ Routed to Command-A model
2025-08-16 17:55:25,841 - src.models.climate_pipeline - INFO - Timing: routing=0.2ms
2025-08-16 17:55:25,841 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Command-A
2025-08-16 17:55:25,841 - src.models.query_routing - INFO - Language: gujarati (gu) → Model: Command-A
2025-08-16 17:55:25,841 - src.models.query_routing - INFO - Translating query from gujarati to English
2025-08-16 17:55:25,841 - src.models.query_routing - INFO - Router NET IN → query repr='આબોહવા પરિવર્તન શું છે?'
2025-08-16 17:55:26,047 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/chat "HTTP/1.1 200 OK"
2025-08-16 17:55:26,051 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:55:26,051 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?'
2025-08-16 17:55:26,051 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?'
2025-08-16 17:55:26,051 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?'
2025-08-16 17:55:26,051 - src.models.climate_pipeline - INFO - Net debug → original_query len=23, utf8_bytes=61
2025-08-16 17:55:26,051 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:55:26,051 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:26,052 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:26,054 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:26,054 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:26,055 - src.models.climate_pipeline - INFO - ✓ Cache hit for gujarati - returning cached response
2025-08-16 17:55:26,056 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381325838 time=0.216s model=command_a faithfulness=0.950
2025-08-16 17:55:26,057 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.219s id=req_1755381325838 ip=127.0.0.1
INFO:     127.0.0.1:50270 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:27,066 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381327065 query_len=13 lang=ko
2025-08-16 17:55:27,066 - src.webui.api.routers.chat - INFO - Language routing: detected=ko model=command_a
2025-08-16 17:55:27,066 - src.models.climate_pipeline - INFO - Processing query: '기후 변화란 무엇인가요?...' in korean (code: ko)
2025-08-16 17:55:27,066 - src.models.climate_pipeline - INFO - Raw query repr: '기후 변화란 무엇인가요?'
2025-08-16 17:55:27,066 - src.models.climate_pipeline - INFO - Router IN → language_name=korean, language_code=ko
2025-08-16 17:55:27,066 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:27,066 - src.models.query_routing - INFO - Language: korean (ko) → Model: Command-A
2025-08-16 17:55:27,066 - src.models.climate_pipeline - INFO - Router OUT → model=Command-A, support=command_a, needs_translation=True
2025-08-16 17:55:27,066 - src.models.climate_pipeline - INFO - Router OUT → english_query='기후 변화란 무엇인가요?'
2025-08-16 17:55:27,066 - src.models.climate_pipeline - INFO - Router OUT → processed_query='기후 변화란 무엇인가요?'
2025-08-16 17:55:27,066 - src.models.climate_pipeline - INFO - ✓ Routed to Command-A model
2025-08-16 17:55:27,066 - src.models.climate_pipeline - INFO - Timing: routing=0.1ms
2025-08-16 17:55:27,066 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Command-A
2025-08-16 17:55:27,066 - src.models.query_routing - INFO - Language: korean (ko) → Model: Command-A
2025-08-16 17:55:27,066 - src.models.query_routing - INFO - Translating query from korean to English
2025-08-16 17:55:27,066 - src.models.query_routing - INFO - Router NET IN → query repr='기후 변화란 무엇인가요?'
2025-08-16 17:55:27,260 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/chat "HTTP/1.1 200 OK"
2025-08-16 17:55:27,261 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:55:27,261 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?'
2025-08-16 17:55:27,261 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?'
2025-08-16 17:55:27,261 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?'
2025-08-16 17:55:27,261 - src.models.climate_pipeline - INFO - Net debug → original_query len=13, utf8_bytes=33
2025-08-16 17:55:27,261 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:55:27,261 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:27,262 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:27,263 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:27,263 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:27,264 - src.models.climate_pipeline - INFO - ✓ Cache hit for korean - returning cached response
2025-08-16 17:55:27,265 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381327065 time=0.199s model=command_a faithfulness=0.950
2025-08-16 17:55:27,265 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.200s id=req_1755381327065 ip=127.0.0.1
INFO:     127.0.0.1:50285 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:28,274 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381328272 query_len=24 lang=fa
2025-08-16 17:55:28,274 - src.webui.api.routers.chat - INFO - Language routing: detected=fa model=command_a
2025-08-16 17:55:28,274 - src.models.climate_pipeline - INFO - Processing query: 'تغییرات آب و هوایی چیست؟...' in persian (code: fa)
2025-08-16 17:55:28,274 - src.models.climate_pipeline - INFO - Raw query repr: 'تغییرات آب و هوایی چیست؟'
2025-08-16 17:55:28,274 - src.models.climate_pipeline - INFO - Router IN → language_name=persian, language_code=fa
2025-08-16 17:55:28,274 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:28,274 - src.models.query_routing - INFO - Language: persian (fa) → Model: Command-A
2025-08-16 17:55:28,274 - src.models.climate_pipeline - INFO - Router OUT → model=Command-A, support=command_a, needs_translation=True
2025-08-16 17:55:28,274 - src.models.climate_pipeline - INFO - Router OUT → english_query='تغییرات آب و هوایی چیست؟'
2025-08-16 17:55:28,274 - src.models.climate_pipeline - INFO - Router OUT → processed_query='تغییرات آب و هوایی چیست؟'
2025-08-16 17:55:28,274 - src.models.climate_pipeline - WARNING - Router language mismatch: query is in Arabic but Persian was selected
2025-08-16 17:55:28,274 - src.models.climate_pipeline - INFO - Proceeding despite router mismatch (soft warning only)
2025-08-16 17:55:28,274 - src.models.climate_pipeline - INFO - ✓ Routed to Command-A model
2025-08-16 17:55:28,274 - src.models.climate_pipeline - INFO - Timing: routing=0.2ms
2025-08-16 17:55:28,274 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Command-A
2025-08-16 17:55:28,274 - src.models.query_routing - INFO - Language: persian (fa) → Model: Command-A
2025-08-16 17:55:28,274 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='تغییرات آب و هوایی چیست؟'
2025-08-16 17:55:28,274 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='تغییرات آب و هوایی چیست؟'
2025-08-16 17:55:28,274 - src.models.climate_pipeline - INFO - Net debug → original_query len=24, utf8_bytes=44
2025-08-16 17:55:28,274 - src.models.climate_pipeline - INFO - Net debug → english_query len=24, utf8_bytes=44
2025-08-16 17:55:28,274 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:28,274 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:28,281 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:28,281 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:28,283 - src.models.climate_pipeline - INFO - ✓ Cache hit for persian - returning cached response
2025-08-16 17:55:28,284 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381328272 time=0.010s model=command_a faithfulness=0.900
2025-08-16 17:55:28,284 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.012s id=req_1755381328272 ip=127.0.0.1
INFO:     127.0.0.1:50296 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:29,296 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381329295 query_len=28 lang=ru
2025-08-16 17:55:29,296 - src.webui.api.routers.chat - INFO - Language routing: detected=ru model=command_a
2025-08-16 17:55:29,296 - src.models.climate_pipeline - INFO - Processing query: 'Что такое изменение климата?...' in russian (code: ru)
2025-08-16 17:55:29,296 - src.models.climate_pipeline - INFO - Raw query repr: 'Что такое изменение климата?'
2025-08-16 17:55:29,296 - src.models.climate_pipeline - INFO - Router IN → language_name=russian, language_code=ru
2025-08-16 17:55:29,296 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:29,296 - src.models.query_routing - INFO - Language: russian (ru) → Model: Command-A
2025-08-16 17:55:29,296 - src.models.climate_pipeline - INFO - Router OUT → model=Command-A, support=command_a, needs_translation=True
2025-08-16 17:55:29,296 - src.models.climate_pipeline - INFO - Router OUT → english_query='Что такое изменение климата?'
2025-08-16 17:55:29,296 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Что такое изменение климата?'
2025-08-16 17:55:29,296 - src.models.climate_pipeline - INFO - ✓ Routed to Command-A model
2025-08-16 17:55:29,296 - src.models.climate_pipeline - INFO - Timing: routing=0.1ms
2025-08-16 17:55:29,296 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Command-A
2025-08-16 17:55:29,296 - src.models.query_routing - INFO - Language: russian (ru) → Model: Command-A
2025-08-16 17:55:29,296 - src.models.query_routing - INFO - Translating query from russian to English
2025-08-16 17:55:29,296 - src.models.query_routing - INFO - Router NET IN → query repr='Что такое изменение климата?'
2025-08-16 17:55:29,505 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/chat "HTTP/1.1 200 OK"
2025-08-16 17:55:29,508 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:55:29,508 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?'
2025-08-16 17:55:29,508 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?'
2025-08-16 17:55:29,508 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?'
2025-08-16 17:55:29,508 - src.models.climate_pipeline - INFO - Net debug → original_query len=28, utf8_bytes=52
2025-08-16 17:55:29,508 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:55:29,508 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:29,508 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:29,510 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:29,510 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:29,511 - src.models.climate_pipeline - INFO - ✓ Cache hit for russian - returning cached response
2025-08-16 17:55:29,511 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381329295 time=0.216s model=command_a faithfulness=0.950
2025-08-16 17:55:29,512 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.217s id=req_1755381329295 ip=127.0.0.1
INFO:     127.0.0.1:50307 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:30,540 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381330533 query_len=29 lang=ta
2025-08-16 17:55:30,540 - src.webui.api.routers.chat - INFO - Language routing: detected=ta model=command_a
2025-08-16 17:55:30,541 - src.models.climate_pipeline - INFO - Processing query: 'காலநிலை மாற்றம் என்றால் என்ன?...' in tamil (code: ta)
2025-08-16 17:55:30,541 - src.models.climate_pipeline - INFO - Raw query repr: 'காலநிலை மாற்றம் என்றால் என்ன?'
2025-08-16 17:55:30,541 - src.models.climate_pipeline - INFO - Router IN → language_name=tamil, language_code=ta
2025-08-16 17:55:30,541 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:30,541 - src.models.query_routing - INFO - Language: tamil (ta) → Model: Command-A
2025-08-16 17:55:30,541 - src.models.climate_pipeline - INFO - Router OUT → model=Command-A, support=command_a, needs_translation=True
2025-08-16 17:55:30,541 - src.models.climate_pipeline - INFO - Router OUT → english_query='காலநிலை மாற்றம் என்றால் என்ன?'
2025-08-16 17:55:30,541 - src.models.climate_pipeline - INFO - Router OUT → processed_query='காலநிலை மாற்றம் என்றால் என்ன?'
2025-08-16 17:55:30,541 - src.models.climate_pipeline - INFO - ✓ Routed to Command-A model
2025-08-16 17:55:30,541 - src.models.climate_pipeline - INFO - Timing: routing=0.3ms
2025-08-16 17:55:30,541 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Command-A
2025-08-16 17:55:30,541 - src.models.query_routing - INFO - Language: tamil (ta) → Model: Command-A
2025-08-16 17:55:30,542 - src.models.query_routing - INFO - Translating query from tamil to English
2025-08-16 17:55:30,542 - src.models.query_routing - INFO - Router NET IN → query repr='காலநிலை மாற்றம் என்றால் என்ன?'
2025-08-16 17:55:30,739 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/chat "HTTP/1.1 200 OK"
2025-08-16 17:55:30,742 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:55:30,742 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?'
2025-08-16 17:55:30,742 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?'
2025-08-16 17:55:30,742 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?'
2025-08-16 17:55:30,742 - src.models.climate_pipeline - INFO - Net debug → original_query len=29, utf8_bytes=79
2025-08-16 17:55:30,742 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:55:30,742 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:30,743 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:30,749 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:30,749 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:30,751 - src.models.climate_pipeline - INFO - ✓ Cache hit for tamil - returning cached response
2025-08-16 17:55:30,751 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381330533 time=0.211s model=command_a faithfulness=0.950
2025-08-16 17:55:30,753 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.219s id=req_1755381330533 ip=127.0.0.1
INFO:     127.0.0.1:50322 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:31,769 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381331767 query_len=23 lang=ur
2025-08-16 17:55:31,769 - src.webui.api.routers.chat - INFO - Language routing: detected=ur model=command_a
2025-08-16 17:55:31,770 - src.models.climate_pipeline - INFO - Processing query: 'موسمیاتی تبدیلی کیا ہے؟...' in urdu (code: ur)
2025-08-16 17:55:31,770 - src.models.climate_pipeline - INFO - Raw query repr: 'موسمیاتی تبدیلی کیا ہے؟'
2025-08-16 17:55:31,770 - src.models.climate_pipeline - INFO - Router IN → language_name=urdu, language_code=ur
2025-08-16 17:55:31,770 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:31,770 - src.models.query_routing - INFO - Language: urdu (ur) → Model: Command-A
2025-08-16 17:55:31,770 - src.models.climate_pipeline - INFO - Router OUT → model=Command-A, support=command_a, needs_translation=True
2025-08-16 17:55:31,770 - src.models.climate_pipeline - INFO - Router OUT → english_query='موسمیاتی تبدیلی کیا ہے؟'
2025-08-16 17:55:31,770 - src.models.climate_pipeline - INFO - Router OUT → processed_query='موسمیاتی تبدیلی کیا ہے؟'
2025-08-16 17:55:31,770 - src.models.climate_pipeline - WARNING - Router language mismatch: query is in Arabic but Urdu was selected
2025-08-16 17:55:31,770 - src.models.climate_pipeline - INFO - Proceeding despite router mismatch (soft warning only)
2025-08-16 17:55:31,770 - src.models.climate_pipeline - INFO - ✓ Routed to Command-A model
2025-08-16 17:55:31,770 - src.models.climate_pipeline - INFO - Timing: routing=0.2ms
2025-08-16 17:55:31,770 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Command-A
2025-08-16 17:55:31,770 - src.models.query_routing - INFO - Language: urdu (ur) → Model: Command-A
2025-08-16 17:55:31,770 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='موسمیاتی تبدیلی کیا ہے؟'
2025-08-16 17:55:31,770 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='موسمیاتی تبدیلی کیا ہے؟'
2025-08-16 17:55:31,770 - src.models.climate_pipeline - INFO - Net debug → original_query len=23, utf8_bytes=43
2025-08-16 17:55:31,770 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=43
2025-08-16 17:55:31,770 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:31,770 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:31,773 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:31,773 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:31,775 - src.models.climate_pipeline - INFO - ✓ Cache hit for urdu - returning cached response
2025-08-16 17:55:31,775 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381331767 time=0.006s model=command_a faithfulness=0.900
2025-08-16 17:55:31,776 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.009s id=req_1755381331767 ip=127.0.0.1
INFO:     127.0.0.1:50335 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:32,808 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381332806 query_len=23 lang=vi
2025-08-16 17:55:32,808 - src.webui.api.routers.chat - INFO - Language routing: detected=vi model=command_a
2025-08-16 17:55:32,809 - src.models.climate_pipeline - INFO - Processing query: 'Biến đổi khí hậu là gì?...' in vietnamese (code: vi)
2025-08-16 17:55:32,809 - src.models.climate_pipeline - INFO - Raw query repr: 'Biến đổi khí hậu là gì?'
2025-08-16 17:55:32,809 - src.models.climate_pipeline - INFO - Router IN → language_name=vietnamese, language_code=vi
2025-08-16 17:55:32,809 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:32,809 - src.models.query_routing - INFO - Language: vietnamese (vi) → Model: Command-A
2025-08-16 17:55:32,809 - src.models.climate_pipeline - INFO - Router OUT → model=Command-A, support=command_a, needs_translation=True
2025-08-16 17:55:32,809 - src.models.climate_pipeline - INFO - Router OUT → english_query='Biến đổi khí hậu là gì?'
2025-08-16 17:55:32,809 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Biến đổi khí hậu là gì?'
2025-08-16 17:55:32,809 - src.models.climate_pipeline - INFO - ✓ Routed to Command-A model
2025-08-16 17:55:32,809 - src.models.climate_pipeline - INFO - Timing: routing=0.1ms
2025-08-16 17:55:32,809 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Command-A
2025-08-16 17:55:32,809 - src.models.query_routing - INFO - Language: vietnamese (vi) → Model: Command-A
2025-08-16 17:55:32,809 - src.models.query_routing - INFO - Translating query from vietnamese to English
2025-08-16 17:55:32,809 - src.models.query_routing - INFO - Router NET IN → query repr='Biến đổi khí hậu là gì?'
2025-08-16 17:55:32,991 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/chat "HTTP/1.1 200 OK"
2025-08-16 17:55:32,993 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:55:32,993 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?'
2025-08-16 17:55:32,993 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?'
2025-08-16 17:55:32,993 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?'
2025-08-16 17:55:32,993 - src.models.climate_pipeline - INFO - Net debug → original_query len=23, utf8_bytes=33
2025-08-16 17:55:32,993 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:55:32,993 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:32,993 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:32,996 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:32,996 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:32,996 - src.models.climate_pipeline - INFO - ✓ Cache hit for vietnamese - returning cached response
2025-08-16 17:55:32,997 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381332806 time=0.188s model=command_a faithfulness=0.950
2025-08-16 17:55:32,997 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.191s id=req_1755381332806 ip=127.0.0.1
INFO:     127.0.0.1:50346 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:34,005 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381334004 query_len=26 lang=pl
2025-08-16 17:55:34,005 - src.webui.api.routers.chat - INFO - Language routing: detected=pl model=command_a
2025-08-16 17:55:34,005 - src.models.climate_pipeline - INFO - Processing query: 'Co to jest zmiana klimatu?...' in polish (code: pl)
2025-08-16 17:55:34,005 - src.models.climate_pipeline - INFO - Raw query repr: 'Co to jest zmiana klimatu?'
2025-08-16 17:55:34,005 - src.models.climate_pipeline - INFO - Router IN → language_name=polish, language_code=pl
2025-08-16 17:55:34,005 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:34,005 - src.models.query_routing - INFO - Language: polish (pl) → Model: Command-A
2025-08-16 17:55:34,005 - src.models.climate_pipeline - INFO - Router OUT → model=Command-A, support=command_a, needs_translation=True
2025-08-16 17:55:34,005 - src.models.climate_pipeline - INFO - Router OUT → english_query='Co to jest zmiana klimatu?'
2025-08-16 17:55:34,006 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Co to jest zmiana klimatu?'
2025-08-16 17:55:34,006 - src.models.climate_pipeline - INFO - ✓ Routed to Command-A model
2025-08-16 17:55:34,006 - src.models.climate_pipeline - INFO - Timing: routing=0.1ms
2025-08-16 17:55:34,006 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Command-A
2025-08-16 17:55:34,006 - src.models.query_routing - INFO - Language: polish (pl) → Model: Command-A
2025-08-16 17:55:34,006 - src.models.query_routing - INFO - Translating query from polish to English
2025-08-16 17:55:34,006 - src.models.query_routing - INFO - Router NET IN → query repr='Co to jest zmiana klimatu?'
2025-08-16 17:55:34,196 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/chat "HTTP/1.1 200 OK"
2025-08-16 17:55:34,198 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:55:34,198 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?'
2025-08-16 17:55:34,198 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?'
2025-08-16 17:55:34,198 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?'
2025-08-16 17:55:34,198 - src.models.climate_pipeline - INFO - Net debug → original_query len=26, utf8_bytes=26
2025-08-16 17:55:34,198 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:55:34,198 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:34,198 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:34,200 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:34,200 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:34,201 - src.models.climate_pipeline - INFO - ✓ Cache hit for polish - returning cached response
2025-08-16 17:55:34,201 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381334004 time=0.196s model=command_a faithfulness=0.950
2025-08-16 17:55:34,204 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.200s id=req_1755381334004 ip=127.0.0.1
INFO:     127.0.0.1:50362 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:35,216 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381335215 query_len=24 lang=tr
2025-08-16 17:55:35,216 - src.webui.api.routers.chat - INFO - Language routing: detected=tr model=command_a
2025-08-16 17:55:35,216 - src.models.climate_pipeline - INFO - Processing query: 'İklim değişikliği nedir?...' in turkish (code: tr)
2025-08-16 17:55:35,216 - src.models.climate_pipeline - INFO - Raw query repr: 'İklim değişikliği nedir?'
2025-08-16 17:55:35,216 - src.models.climate_pipeline - INFO - Router IN → language_name=turkish, language_code=tr
2025-08-16 17:55:35,216 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:35,216 - src.models.query_routing - INFO - Language: turkish (tr) → Model: Command-A
2025-08-16 17:55:35,216 - src.models.climate_pipeline - INFO - Router OUT → model=Command-A, support=command_a, needs_translation=True
2025-08-16 17:55:35,217 - src.models.climate_pipeline - INFO - Router OUT → english_query='İklim değişikliği nedir?'
2025-08-16 17:55:35,217 - src.models.climate_pipeline - INFO - Router OUT → processed_query='İklim değişikliği nedir?'
2025-08-16 17:55:35,217 - src.models.climate_pipeline - INFO - ✓ Routed to Command-A model
2025-08-16 17:55:35,217 - src.models.climate_pipeline - INFO - Timing: routing=0.1ms
2025-08-16 17:55:35,217 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Command-A
2025-08-16 17:55:35,217 - src.models.query_routing - INFO - Language: turkish (tr) → Model: Command-A
2025-08-16 17:55:35,217 - src.models.query_routing - INFO - Translating query from turkish to English
2025-08-16 17:55:35,217 - src.models.query_routing - INFO - Router NET IN → query repr='İklim değişikliği nedir?'
2025-08-16 17:55:35,423 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/chat "HTTP/1.1 200 OK"
2025-08-16 17:55:35,425 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:55:35,425 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?'
2025-08-16 17:55:35,425 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?'
2025-08-16 17:55:35,425 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?'
2025-08-16 17:55:35,425 - src.models.climate_pipeline - INFO - Net debug → original_query len=24, utf8_bytes=28
2025-08-16 17:55:35,425 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:55:35,425 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:35,425 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:35,430 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:35,430 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:35,431 - src.models.climate_pipeline - INFO - ✓ Cache hit for turkish - returning cached response
2025-08-16 17:55:35,431 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381335215 time=0.215s model=command_a faithfulness=0.950
2025-08-16 17:55:35,431 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.217s id=req_1755381335215 ip=127.0.0.1
INFO:     127.0.0.1:50373 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:36,442 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381336440 query_len=26 lang=nl
2025-08-16 17:55:36,442 - src.webui.api.routers.chat - INFO - Language routing: detected=nl model=command_a
2025-08-16 17:55:36,443 - src.models.climate_pipeline - INFO - Processing query: 'Wat is klimaatverandering?...' in dutch (code: nl)
2025-08-16 17:55:36,443 - src.models.climate_pipeline - INFO - Raw query repr: 'Wat is klimaatverandering?'
2025-08-16 17:55:36,443 - src.models.climate_pipeline - INFO - Router IN → language_name=dutch, language_code=nl
2025-08-16 17:55:36,443 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:36,443 - src.models.query_routing - INFO - Language: dutch (nl) → Model: Command-A
2025-08-16 17:55:36,443 - src.models.climate_pipeline - INFO - Router OUT → model=Command-A, support=command_a, needs_translation=True
2025-08-16 17:55:36,443 - src.models.climate_pipeline - INFO - Router OUT → english_query='Wat is klimaatverandering?'
2025-08-16 17:55:36,443 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Wat is klimaatverandering?'
2025-08-16 17:55:36,443 - src.models.climate_pipeline - INFO - ✓ Routed to Command-A model
2025-08-16 17:55:36,443 - src.models.climate_pipeline - INFO - Timing: routing=0.3ms
2025-08-16 17:55:36,443 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Command-A
2025-08-16 17:55:36,443 - src.models.query_routing - INFO - Language: dutch (nl) → Model: Command-A
2025-08-16 17:55:36,443 - src.models.query_routing - INFO - Translating query from dutch to English
2025-08-16 17:55:36,443 - src.models.query_routing - INFO - Router NET IN → query repr='Wat is klimaatverandering?'
2025-08-16 17:55:36,646 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/chat "HTTP/1.1 200 OK"
2025-08-16 17:55:36,648 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:55:36,648 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?'
2025-08-16 17:55:36,648 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?'
2025-08-16 17:55:36,648 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?'
2025-08-16 17:55:36,648 - src.models.climate_pipeline - INFO - Net debug → original_query len=26, utf8_bytes=26
2025-08-16 17:55:36,648 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:55:36,648 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:36,648 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:36,657 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:36,657 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:36,658 - src.models.climate_pipeline - INFO - ✓ Cache hit for dutch - returning cached response
2025-08-16 17:55:36,659 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381336440 time=0.217s model=command_a faithfulness=0.950
2025-08-16 17:55:36,659 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.219s id=req_1755381336440 ip=127.0.0.1
INFO:     127.0.0.1:50388 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:37,668 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381337667 query_len=20 lang=cs
2025-08-16 17:55:37,668 - src.webui.api.routers.chat - INFO - Language routing: detected=cs model=command_a
2025-08-16 17:55:37,668 - src.models.climate_pipeline - INFO - Processing query: 'Co je změna klimatu?...' in czech (code: cs)
2025-08-16 17:55:37,669 - src.models.climate_pipeline - INFO - Raw query repr: 'Co je změna klimatu?'
2025-08-16 17:55:37,669 - src.models.climate_pipeline - INFO - Router IN → language_name=czech, language_code=cs
2025-08-16 17:55:37,669 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:37,669 - src.models.query_routing - INFO - Language: czech (cs) → Model: Command-A
2025-08-16 17:55:37,669 - src.models.climate_pipeline - INFO - Router OUT → model=Command-A, support=command_a, needs_translation=True
2025-08-16 17:55:37,669 - src.models.climate_pipeline - INFO - Router OUT → english_query='Co je změna klimatu?'
2025-08-16 17:55:37,669 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Co je změna klimatu?'
2025-08-16 17:55:37,669 - src.models.climate_pipeline - INFO - ✓ Routed to Command-A model
2025-08-16 17:55:37,669 - src.models.climate_pipeline - INFO - Timing: routing=0.4ms
2025-08-16 17:55:37,669 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Command-A
2025-08-16 17:55:37,669 - src.models.query_routing - INFO - Language: czech (cs) → Model: Command-A
2025-08-16 17:55:37,669 - src.models.query_routing - INFO - Translating query from czech to English
2025-08-16 17:55:37,669 - src.models.query_routing - INFO - Router NET IN → query repr='Co je změna klimatu?'
2025-08-16 17:55:37,862 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/chat "HTTP/1.1 200 OK"
2025-08-16 17:55:37,866 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:55:37,866 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?'
2025-08-16 17:55:37,866 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?'
2025-08-16 17:55:37,866 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?'
2025-08-16 17:55:37,866 - src.models.climate_pipeline - INFO - Net debug → original_query len=20, utf8_bytes=21
2025-08-16 17:55:37,866 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:55:37,866 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:37,866 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:37,869 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:37,869 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:37,869 - src.models.climate_pipeline - INFO - ✓ Cache hit for czech - returning cached response
2025-08-16 17:55:37,870 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381337667 time=0.201s model=command_a faithfulness=0.950
2025-08-16 17:55:37,871 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.204s id=req_1755381337667 ip=127.0.0.1
INFO:     127.0.0.1:50399 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:38,878 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381338876 query_len=24 lang=id
2025-08-16 17:55:38,878 - src.webui.api.routers.chat - INFO - Language routing: detected=id model=command_a
2025-08-16 17:55:38,879 - src.models.climate_pipeline - INFO - Processing query: 'Apa itu perubahan iklim?...' in indonesian (code: id)
2025-08-16 17:55:38,879 - src.models.climate_pipeline - INFO - Raw query repr: 'Apa itu perubahan iklim?'
2025-08-16 17:55:38,879 - src.models.climate_pipeline - INFO - Router IN → language_name=indonesian, language_code=id
2025-08-16 17:55:38,879 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:38,879 - src.models.query_routing - INFO - Language: indonesian (id) → Model: Command-A
2025-08-16 17:55:38,879 - src.models.climate_pipeline - INFO - Router OUT → model=Command-A, support=command_a, needs_translation=True
2025-08-16 17:55:38,879 - src.models.climate_pipeline - INFO - Router OUT → english_query='Apa itu perubahan iklim?'
2025-08-16 17:55:38,879 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Apa itu perubahan iklim?'
2025-08-16 17:55:38,879 - src.models.climate_pipeline - INFO - ✓ Routed to Command-A model
2025-08-16 17:55:38,879 - src.models.climate_pipeline - INFO - Timing: routing=0.2ms
2025-08-16 17:55:38,879 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Command-A
2025-08-16 17:55:38,879 - src.models.query_routing - INFO - Language: indonesian (id) → Model: Command-A
2025-08-16 17:55:38,879 - src.models.query_routing - INFO - Translating query from indonesian to English
2025-08-16 17:55:38,879 - src.models.query_routing - INFO - Router NET IN → query repr='Apa itu perubahan iklim?'
2025-08-16 17:55:39,099 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/chat "HTTP/1.1 200 OK"
2025-08-16 17:55:39,100 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:55:39,100 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?'
2025-08-16 17:55:39,100 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?'
2025-08-16 17:55:39,100 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?'
2025-08-16 17:55:39,100 - src.models.climate_pipeline - INFO - Net debug → original_query len=24, utf8_bytes=24
2025-08-16 17:55:39,100 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:55:39,100 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:39,101 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:39,102 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:39,102 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:39,104 - src.models.climate_pipeline - INFO - ✓ Cache hit for indonesian - returning cached response
2025-08-16 17:55:39,104 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381338876 time=0.226s model=command_a faithfulness=0.950
2025-08-16 17:55:39,104 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.228s id=req_1755381338876 ip=127.0.0.1
INFO:     127.0.0.1:50410 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:40,117 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381340115 query_len=22 lang=uk
2025-08-16 17:55:40,117 - src.webui.api.routers.chat - INFO - Language routing: detected=uk model=command_a
2025-08-16 17:55:40,118 - src.models.climate_pipeline - INFO - Processing query: 'Що таке зміна клімату?...' in ukrainian (code: uk)
2025-08-16 17:55:40,118 - src.models.climate_pipeline - INFO - Raw query repr: 'Що таке зміна клімату?'
2025-08-16 17:55:40,118 - src.models.climate_pipeline - INFO - Router IN → language_name=ukrainian, language_code=uk
2025-08-16 17:55:40,118 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:40,118 - src.models.query_routing - INFO - Language: ukrainian (uk) → Model: Command-A
2025-08-16 17:55:40,118 - src.models.climate_pipeline - INFO - Router OUT → model=Command-A, support=command_a, needs_translation=True
2025-08-16 17:55:40,118 - src.models.climate_pipeline - INFO - Router OUT → english_query='Що таке зміна клімату?'
2025-08-16 17:55:40,118 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Що таке зміна клімату?'
2025-08-16 17:55:40,118 - src.models.climate_pipeline - WARNING - Router language mismatch: query is in Russian but Ukrainian was selected
2025-08-16 17:55:40,118 - src.models.climate_pipeline - INFO - Proceeding despite router mismatch (soft warning only)
2025-08-16 17:55:40,118 - src.models.climate_pipeline - INFO - ✓ Routed to Command-A model
2025-08-16 17:55:40,119 - src.models.climate_pipeline - INFO - Timing: routing=0.3ms
2025-08-16 17:55:40,119 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Command-A
2025-08-16 17:55:40,119 - src.models.query_routing - INFO - Language: ukrainian (uk) → Model: Command-A
2025-08-16 17:55:40,119 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='Що таке зміна клімату?'
2025-08-16 17:55:40,119 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='Що таке зміна клімату?'
2025-08-16 17:55:40,119 - src.models.climate_pipeline - INFO - Net debug → original_query len=22, utf8_bytes=40
2025-08-16 17:55:40,119 - src.models.climate_pipeline - INFO - Net debug → english_query len=22, utf8_bytes=40
2025-08-16 17:55:40,119 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:40,119 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:40,126 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:40,126 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:40,127 - src.models.climate_pipeline - INFO - ✓ Cache hit for ukrainian - returning cached response
2025-08-16 17:55:40,127 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381340115 time=0.010s model=command_a faithfulness=0.950
2025-08-16 17:55:40,128 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.013s id=req_1755381340115 ip=127.0.0.1
INFO:     127.0.0.1:50425 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:41,142 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381341141 query_len=29 lang=ro
2025-08-16 17:55:41,142 - src.webui.api.routers.chat - INFO - Language routing: detected=ro model=command_a
2025-08-16 17:55:41,143 - src.models.climate_pipeline - INFO - Processing query: 'Ce este schimbarea climatică?...' in romanian (code: ro)
2025-08-16 17:55:41,143 - src.models.climate_pipeline - INFO - Raw query repr: 'Ce este schimbarea climatică?'
2025-08-16 17:55:41,143 - src.models.climate_pipeline - INFO - Router IN → language_name=romanian, language_code=ro
2025-08-16 17:55:41,143 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:41,143 - src.models.query_routing - INFO - Language: romanian (ro) → Model: Command-A
2025-08-16 17:55:41,143 - src.models.climate_pipeline - INFO - Router OUT → model=Command-A, support=command_a, needs_translation=True
2025-08-16 17:55:41,143 - src.models.climate_pipeline - INFO - Router OUT → english_query='Ce este schimbarea climatică?'
2025-08-16 17:55:41,143 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Ce este schimbarea climatică?'
2025-08-16 17:55:41,143 - src.models.climate_pipeline - INFO - ✓ Routed to Command-A model
2025-08-16 17:55:41,143 - src.models.climate_pipeline - INFO - Timing: routing=0.1ms
2025-08-16 17:55:41,143 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Command-A
2025-08-16 17:55:41,143 - src.models.query_routing - INFO - Language: romanian (ro) → Model: Command-A
2025-08-16 17:55:41,143 - src.models.query_routing - INFO - Translating query from romanian to English
2025-08-16 17:55:41,143 - src.models.query_routing - INFO - Router NET IN → query repr='Ce este schimbarea climatică?'
2025-08-16 17:55:41,368 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/chat "HTTP/1.1 200 OK"
2025-08-16 17:55:41,371 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:55:41,371 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?'
2025-08-16 17:55:41,371 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?'
2025-08-16 17:55:41,371 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?'
2025-08-16 17:55:41,371 - src.models.climate_pipeline - INFO - Net debug → original_query len=29, utf8_bytes=30
2025-08-16 17:55:41,371 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:55:41,371 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:41,371 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:41,373 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:41,373 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:41,374 - src.models.climate_pipeline - INFO - ✓ Cache hit for romanian - returning cached response
2025-08-16 17:55:41,375 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381341141 time=0.233s model=command_a faithfulness=0.950
2025-08-16 17:55:41,376 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.235s id=req_1755381341141 ip=127.0.0.1
INFO:     127.0.0.1:50436 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:42,389 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381342388 query_len=28 lang=el
2025-08-16 17:55:42,389 - src.webui.api.routers.chat - INFO - Language routing: detected=el model=command_a
2025-08-16 17:55:42,390 - src.models.climate_pipeline - INFO - Processing query: 'Τι είναι η κλιματική αλλαγή;...' in greek (code: el)
2025-08-16 17:55:42,390 - src.models.climate_pipeline - INFO - Raw query repr: 'Τι είναι η κλιματική αλλαγή;'
2025-08-16 17:55:42,390 - src.models.climate_pipeline - INFO - Router IN → language_name=greek, language_code=el
2025-08-16 17:55:42,390 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:42,390 - src.models.query_routing - INFO - Language: greek (el) → Model: Command-A
2025-08-16 17:55:42,390 - src.models.climate_pipeline - INFO - Router OUT → model=Command-A, support=command_a, needs_translation=True
2025-08-16 17:55:42,390 - src.models.climate_pipeline - INFO - Router OUT → english_query='Τι είναι η κλιματική αλλαγή;'
2025-08-16 17:55:42,390 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Τι είναι η κλιματική αλλαγή;'
2025-08-16 17:55:42,390 - src.models.climate_pipeline - INFO - ✓ Routed to Command-A model
2025-08-16 17:55:42,390 - src.models.climate_pipeline - INFO - Timing: routing=0.2ms
2025-08-16 17:55:42,390 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Command-A
2025-08-16 17:55:42,390 - src.models.query_routing - INFO - Language: greek (el) → Model: Command-A
2025-08-16 17:55:42,390 - src.models.query_routing - INFO - Translating query from greek to English
2025-08-16 17:55:42,390 - src.models.query_routing - INFO - Router NET IN → query repr='Τι είναι η κλιματική αλλαγή;'
2025-08-16 17:55:42,579 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/chat "HTTP/1.1 200 OK"
2025-08-16 17:55:42,581 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:55:42,581 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?'
2025-08-16 17:55:42,581 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?'
2025-08-16 17:55:42,581 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?'
2025-08-16 17:55:42,581 - src.models.climate_pipeline - INFO - Net debug → original_query len=28, utf8_bytes=51
2025-08-16 17:55:42,581 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:55:42,581 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:42,581 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:42,590 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:42,590 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:42,591 - src.models.climate_pipeline - INFO - ✓ Cache hit for greek - returning cached response
2025-08-16 17:55:42,592 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381342388 time=0.202s model=command_a faithfulness=0.950
2025-08-16 17:55:42,592 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.205s id=req_1755381342388 ip=127.0.0.1
INFO:     127.0.0.1:50452 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:43,601 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381343601 query_len=24 lang=hi
2025-08-16 17:55:43,602 - src.webui.api.routers.chat - INFO - Language routing: detected=hi model=command_a
2025-08-16 17:55:43,602 - src.models.climate_pipeline - INFO - Processing query: 'जलवायु परिवर्तन क्या है?...' in hindi (code: hi)
2025-08-16 17:55:43,602 - src.models.climate_pipeline - INFO - Raw query repr: 'जलवायु परिवर्तन क्या है?'
2025-08-16 17:55:43,602 - src.models.climate_pipeline - INFO - Router IN → language_name=hindi, language_code=hi
2025-08-16 17:55:43,602 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:43,602 - src.models.query_routing - INFO - Language: hindi (hi) → Model: Command-A
2025-08-16 17:55:43,602 - src.models.climate_pipeline - INFO - Router OUT → model=Command-A, support=command_a, needs_translation=True
2025-08-16 17:55:43,602 - src.models.climate_pipeline - INFO - Router OUT → english_query='जलवायु परिवर्तन क्या है?'
2025-08-16 17:55:43,602 - src.models.climate_pipeline - INFO - Router OUT → processed_query='जलवायु परिवर्तन क्या है?'
2025-08-16 17:55:43,602 - src.models.climate_pipeline - INFO - ✓ Routed to Command-A model
2025-08-16 17:55:43,602 - src.models.climate_pipeline - INFO - Timing: routing=0.1ms
2025-08-16 17:55:43,602 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Command-A
2025-08-16 17:55:43,602 - src.models.query_routing - INFO - Language: hindi (hi) → Model: Command-A
2025-08-16 17:55:43,602 - src.models.query_routing - INFO - Translating query from hindi to English
2025-08-16 17:55:43,602 - src.models.query_routing - INFO - Router NET IN → query repr='जलवायु परिवर्तन क्या है?'
2025-08-16 17:55:43,805 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/chat "HTTP/1.1 200 OK"
2025-08-16 17:55:43,808 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:55:43,808 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?'
2025-08-16 17:55:43,808 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?'
2025-08-16 17:55:43,808 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?'
2025-08-16 17:55:43,808 - src.models.climate_pipeline - INFO - Net debug → original_query len=24, utf8_bytes=64
2025-08-16 17:55:43,808 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:55:43,808 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:43,808 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:43,811 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:43,811 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:43,811 - src.models.climate_pipeline - INFO - ✓ Cache hit for hindi - returning cached response
2025-08-16 17:55:43,811 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381343601 time=0.210s model=command_a faithfulness=0.950
2025-08-16 17:55:43,812 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.211s id=req_1755381343601 ip=127.0.0.1
INFO:     127.0.0.1:50463 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:44,822 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381344821 query_len=18 lang=he
2025-08-16 17:55:44,822 - src.webui.api.routers.chat - INFO - Language routing: detected=he model=command_a
2025-08-16 17:55:44,822 - src.models.climate_pipeline - INFO - Processing query: 'מה זה שינוי אקלים?...' in hebrew (code: he)
2025-08-16 17:55:44,822 - src.models.climate_pipeline - INFO - Raw query repr: 'מה זה שינוי אקלים?'
2025-08-16 17:55:44,822 - src.models.climate_pipeline - INFO - Router IN → language_name=hebrew, language_code=he
2025-08-16 17:55:44,822 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:44,822 - src.models.query_routing - INFO - Language: hebrew (he) → Model: Command-A
2025-08-16 17:55:44,822 - src.models.climate_pipeline - INFO - Router OUT → model=Command-A, support=command_a, needs_translation=True
2025-08-16 17:55:44,822 - src.models.climate_pipeline - INFO - Router OUT → english_query='מה זה שינוי אקלים?'
2025-08-16 17:55:44,822 - src.models.climate_pipeline - INFO - Router OUT → processed_query='מה זה שינוי אקלים?'
2025-08-16 17:55:44,822 - src.models.climate_pipeline - INFO - ✓ Routed to Command-A model
2025-08-16 17:55:44,822 - src.models.climate_pipeline - INFO - Timing: routing=0.1ms
2025-08-16 17:55:44,822 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Command-A
2025-08-16 17:55:44,823 - src.models.query_routing - INFO - Language: hebrew (he) → Model: Command-A
2025-08-16 17:55:44,823 - src.models.query_routing - INFO - Translating query from hebrew to English
2025-08-16 17:55:44,823 - src.models.query_routing - INFO - Router NET IN → query repr='מה זה שינוי אקלים?'
2025-08-16 17:55:45,019 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/chat "HTTP/1.1 200 OK"
2025-08-16 17:55:45,021 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:55:45,021 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?'
2025-08-16 17:55:45,022 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?'
2025-08-16 17:55:45,022 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?'
2025-08-16 17:55:45,022 - src.models.climate_pipeline - INFO - Net debug → original_query len=18, utf8_bytes=32
2025-08-16 17:55:45,022 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:55:45,022 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:45,022 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:45,023 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:45,024 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:45,025 - src.models.climate_pipeline - INFO - ✓ Cache hit for hebrew - returning cached response
2025-08-16 17:55:45,026 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381344821 time=0.204s model=command_a faithfulness=0.950
2025-08-16 17:55:45,026 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.205s id=req_1755381344821 ip=127.0.0.1
INFO:     127.0.0.1:50474 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:46,033 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381346032 query_len=23 lang=en
2025-08-16 17:55:46,034 - src.webui.api.routers.chat - INFO - Language routing: detected=en model=nova
2025-08-16 17:55:46,034 - src.models.climate_pipeline - INFO - Processing query: 'What is climate change?...' in english (code: en)
2025-08-16 17:55:46,034 - src.models.climate_pipeline - INFO - Raw query repr: 'What is climate change?'
2025-08-16 17:55:46,034 - src.models.climate_pipeline - INFO - Router IN → language_name=english, language_code=en
2025-08-16 17:55:46,034 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:46,034 - src.models.query_routing - INFO - Language: english (en) → Model: Nova
2025-08-16 17:55:46,034 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=False
2025-08-16 17:55:46,034 - src.models.climate_pipeline - INFO - Router OUT → english_query='What is climate change?'
2025-08-16 17:55:46,034 - src.models.climate_pipeline - INFO - Router OUT → processed_query='What is climate change?'
2025-08-16 17:55:46,034 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:55:46,034 - src.models.climate_pipeline - INFO - Timing: routing=0.1ms
2025-08-16 17:55:46,034 - src.models.climate_pipeline - INFO - Net debug → original_query len=23, utf8_bytes=23
2025-08-16 17:55:46,034 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:55:46,034 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:46,034 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:46,036 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:46,036 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:46,036 - src.models.climate_pipeline - INFO - ✓ Cache hit for english - returning cached response
2025-08-16 17:55:46,036 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381346032 time=0.003s model=nova faithfulness=0.950
2025-08-16 17:55:46,037 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.005s id=req_1755381346032 ip=127.0.0.1
INFO:     127.0.0.1:50489 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:47,048 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381347046 query_len=28 lang=es
2025-08-16 17:55:47,048 - src.webui.api.routers.chat - INFO - Language routing: detected=es model=nova
2025-08-16 17:55:47,048 - src.models.climate_pipeline - INFO - Processing query: '¿Qué es el cambio climático?...' in spanish (code: es)
2025-08-16 17:55:47,048 - src.models.climate_pipeline - INFO - Raw query repr: '¿Qué es el cambio climático?'
2025-08-16 17:55:47,048 - src.models.climate_pipeline - INFO - Router IN → language_name=spanish, language_code=es
2025-08-16 17:55:47,048 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:47,048 - src.models.query_routing - INFO - Language: spanish (es) → Model: Nova
2025-08-16 17:55:47,048 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:55:47,048 - src.models.climate_pipeline - INFO - Router OUT → english_query='¿Qué es el cambio climático?'
2025-08-16 17:55:47,049 - src.models.climate_pipeline - INFO - Router OUT → processed_query='¿Qué es el cambio climático?'
2025-08-16 17:55:47,049 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:55:47,049 - src.models.climate_pipeline - INFO - Timing: routing=0.1ms
2025-08-16 17:55:47,049 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:55:47,049 - src.models.query_routing - INFO - Language: spanish (es) → Model: Nova
2025-08-16 17:55:47,049 - src.models.query_routing - INFO - Translating query from spanish to English
2025-08-16 17:55:47,049 - src.models.query_routing - INFO - Router NET IN → query repr='¿Qué es el cambio climático?'
2025-08-16 17:55:47,782 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=731 status=OK request_id=206dbd9e-4b8e-4587-980c-184748f55415
2025-08-16 17:55:47,782 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:55:47,783 - src.models.query_routing - INFO - Router NET OUT → english_query repr="What is climate change?\n\nClimate change refers to significant changes in global temperatures and weather patterns over time. While climate variability has always been a natural part of Earth's history"
2025-08-16 17:55:47,783 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate variability has always been a natural part of Earth's history'
2025-08-16 17:55:47,783 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate variability has always been a natural part of Earth's history'
2025-08-16 17:55:47,783 - src.models.climate_pipeline - INFO - Net debug → original_query len=28, utf8_bytes=31
2025-08-16 17:55:47,783 - src.models.climate_pipeline - INFO - Net debug → english_query len=609, utf8_bytes=609
2025-08-16 17:55:47,783 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:47,783 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:47,786 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:47,786 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:47,787 - src.models.climate_pipeline - INFO - Cache miss for spanish query
2025-08-16 17:55:47,788 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:47,789 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:47,789 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:47,789 - src.models.climate_pipeline - INFO - Timing: cache=6.6ms
2025-08-16 17:55:47,790 - src.models.climate_pipeline - INFO - Step 3: Query Rewriting
2025-08-16 17:55:47,790 - src.models.conversation_parser - INFO - No conversation history to format
2025-08-16 17:55:47,790 - src.models.climate_pipeline - INFO - Rewriter IN → expected_lang=es, history_len=0
2025-08-16 17:55:47,790 - src.models.climate_pipeline - INFO - Rewriter IN → original_query='¿Qué es el cambio climático?'
2025-08-16 17:55:47,790 - query_rewriter - INFO - Rewriter NET IN → expected_lang=es, user_query repr='¿Qué es el cambio climático?', norm='¿Qué es el cambio climático?'
2025-08-16 17:55:48,425 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=634 status=OK request_id=b3f6673d-446c-4af2-97e6-7d27150bff16
2025-08-16 17:55:48,426 - query_rewriter - INFO - Model raw (first 300): {"reason":"User query is in Spanish and asks about climate change.","language":"es","expected_language":"es","language_match":true,"classification":"on-topic","rewrite_en":"What is climate change?","ask_how_to_use":false,"how_it_works":null,"error":null}
2025-08-16 17:55:48,426 - query_rewriter - INFO - Rewriter NET OUT → json keys=['ask_how_to_use', 'classification', 'error', 'expected_language', 'how_it_works', 'language', 'language_match', 'reason', 'rewrite_en']
2025-08-16 17:55:48,426 - query_rewriter - INFO - 🔍 CLASSIFICATION_DEBUG: query='¿Qué es el cambio climático?...' expected_lang=es detected_lang=es classification=on-topic language_match=True reason='User query is in Spanish and asks about climate change....'
2025-08-16 17:55:48,426 - src.models.climate_pipeline - INFO - Rewriter OUT → detected_lang='es', classification='on-topic', language_match='yes', canned=False
2025-08-16 17:55:48,426 - src.models.climate_pipeline - INFO - Rewriter OUT → rewrite_en='What is climate change?'
2025-08-16 17:55:48,427 - src.models.climate_pipeline - INFO - ✓ Query rewritten (JSON) for better retrieval
2025-08-16 17:55:48,428 - src.models.climate_pipeline - INFO - Timing: rewrite=638.5ms
2025-08-16 17:55:48,428 - src.models.climate_pipeline - INFO - Step 4: Input Guards
2025-08-16 17:55:48,428 - src.models.climate_pipeline - INFO - ✓ Input guards passed
2025-08-16 17:55:48,428 - src.models.climate_pipeline - INFO - Timing: guards=0.0ms
2025-08-16 17:55:48,428 - src.models.climate_pipeline - INFO - Step 5: Document Retrieval
2025-08-16 17:55:48,428 - src.models.retrieval - INFO - 🔄 Pre-computing query embeddings to avoid redundant encode() calls
2025-08-16 17:55:48,428 - src.models.retrieval - INFO - Query embedding IN: query_len=23 chars, query_repr='What is climate change?...'
2025-08-16 17:55:50,857 - src.models.retrieval - INFO - dep=query_embed op=encode ms=2428 dense_dim=1024 sparse_tokens=5
2025-08-16 17:55:52,096 - src.models.retrieval - INFO - dep=pinecone host=unknown op=query ms=1236 status=OK
2025-08-16 17:55:52,096 - src.models.retrieval - INFO - dep=hybrid_search embed_ms=0 query_ms=1238 total_ms=1238
2025-08-16 17:55:52,581 - src.models.retrieval - INFO - dep=pinecone host=unknown op=query ms=484 status=OK
2025-08-16 17:55:52,582 - src.models.retrieval - INFO - pinecone.match type=<class 'pinecone.core.openapi.data.model.scored_vector.ScoredVector'> attrs_have_values=True has_values=True
2025-08-16 17:55:52,582 - src.models.retrieval - INFO - dep=hybrid_search embed_ms=0 query_ms=485 total_ms=485
2025-08-16 17:55:52,586 - src.models.retrieval - INFO - dep=mmr_embed used_index=7 used_cache=0 embedded=0 ms=0 n_docs=7 valid_vecs=7 q_embed_ms=0
2025-08-16 17:55:52,587 - src.models.rerank - INFO - dep=cohere_rerank payload_chars=8944 n_docs=7
2025-08-16 17:55:52,856 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-08-16 17:55:52,859 - src.models.rerank - INFO - dep=cohere_rerank host=api.cohere.com op=rerank ms=271.6 status=OK
2025-08-16 17:55:52,862 - src.models.retrieval - INFO - Retained docs preview: [{'title': 'Health Of Canadians In Changing Climate Report', 'pinecone_score': 0.280184954, 'rerank_score': 0.9995272, 'has_values': True}, {'title': 'Canadian Communities’ Guidebook For Adaptation To Climate Change Including An Ap', 'pinecone_score': 0.26793474, 'rerank_score': 0.99945575, 'has_values': True}, {'title': 'Planning To Be A Part Of My Region! Grade 9 Lesson Plans Designed For Students I', 'pinecone_score': 0.271402389, 'rerank_score': 0.9993881, 'has_values': True}, {'title': "Report For Action Toronto's Climate Change Readiness Updates Oncommitments And A", 'pinecone_score': 0.274087071, 'rerank_score': 0.99843913, 'has_values': True}, {'title': '11356 2022 Article 19718', 'pinecone_score': 0.270209789, 'rerank_score': 0.9980354, 'has_values': True}]
2025-08-16 17:55:52,862 - src.models.retrieval - INFO - q='What is climate change?', base=7, kept_pre=7, refill=0, final_before=5, final_after=5, hybrid_refill=0, floor=0.95, delta=0.100, max_sim_pre=0.280, p50_sim_pre=0.271, p95_sim_pre=0.280, blocked_base=0, dropped_top2=[]
2025-08-16 17:55:52,862 - src.models.climate_pipeline - INFO - ✓ Retrieved 5 documents
2025-08-16 17:55:52,862 - src.models.climate_pipeline - INFO - Timing: retrieval=4433.6ms
2025-08-16 17:55:52,862 - src.models.climate_pipeline - INFO - Step 6: Response Generation (Nova)
2025-08-16 17:55:52,862 - src.models.gen_response_unified - INFO - Starting nova response generation
2025-08-16 17:55:52,862 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:52,873 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:52,873 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:52,874 - src.models.gen_response_unified - INFO - Cache hit for nova - returning cached response
2025-08-16 17:55:52,874 - src.models.climate_pipeline - INFO - ✓ Response generated successfully in English
2025-08-16 17:55:52,874 - src.models.climate_pipeline - INFO - Timing: generation=12.1ms
2025-08-16 17:55:52,874 - src.models.climate_pipeline - INFO - Step 7: Quality Validation
2025-08-16 17:55:54,224 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=1349 status=OK request_id=e3f40079-c597-40e9-a7c9-56755dcf1a19
2025-08-16 17:55:54,226 - src.models.hallucination_guard - INFO - Faithfulness score: 0.9
2025-08-16 17:55:54,226 - src.models.climate_pipeline - INFO - ✓ Faithfulness score: 0.900
2025-08-16 17:55:54,226 - src.models.climate_pipeline - INFO - ✓ Assessment: Highly Faithful
2025-08-16 17:55:54,226 - src.models.climate_pipeline - INFO - Timing: faithfulness=1351.9ms
2025-08-16 17:55:54,226 - src.models.climate_pipeline - INFO - Step 8: Translating response to spanish (code=es)
2025-08-16 17:55:58,563 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=4336 status=OK request_id=8f7c3037-3436-4133-aee8-54dc56475424
2025-08-16 17:55:58,567 - src.models.climate_pipeline - INFO - ✓ Response translated successfully to spanish
2025-08-16 17:55:58,568 - src.models.climate_pipeline - INFO - Timing: translation=4341.5ms
2025-08-16 17:55:58,569 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:58,577 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:58,577 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:58,579 - src.models.climate_pipeline - INFO - ✓ Response cached in spanish
2025-08-16 17:55:58,579 - src.models.climate_pipeline - INFO - ✓ English version also cached
2025-08-16 17:55:58,581 - src.models.climate_pipeline - INFO - Timing summary (ms): routing=0.1 rewrite=638.5 guards=0.0 retrieval=4433.6 generation=12.1 faithfulness=1351.9 translation=4341.5 total=11519.4
2025-08-16 17:55:58,581 - src.models.climate_pipeline - INFO - ✓ Query processed successfully in 11.52s
2025-08-16 17:55:58,582 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381347046 time=11.534s model=nova faithfulness=0.900
2025-08-16 17:55:58,584 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=11.537s id=req_1755381347046 ip=127.0.0.1
INFO:     127.0.0.1:50500 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:55:59,599 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381359596 query_len=11 lang=ja
2025-08-16 17:55:59,600 - src.webui.api.routers.chat - INFO - Language routing: detected=ja model=nova
2025-08-16 17:55:59,600 - src.models.climate_pipeline - INFO - Processing query: '気候変動とは何ですか？...' in japanese (code: ja)
2025-08-16 17:55:59,600 - src.models.climate_pipeline - INFO - Raw query repr: '気候変動とは何ですか？'
2025-08-16 17:55:59,600 - src.models.climate_pipeline - INFO - Router IN → language_name=japanese, language_code=ja
2025-08-16 17:55:59,600 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:55:59,601 - src.models.query_routing - INFO - Language: japanese (ja) → Model: Nova
2025-08-16 17:55:59,601 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:55:59,601 - src.models.climate_pipeline - INFO - Router OUT → english_query='気候変動とは何ですか？'
2025-08-16 17:55:59,601 - src.models.climate_pipeline - INFO - Router OUT → processed_query='気候変動とは何ですか？'
2025-08-16 17:55:59,601 - src.models.climate_pipeline - WARNING - Router language mismatch: query is in Chinese but Japanese was selected
2025-08-16 17:55:59,601 - src.models.climate_pipeline - INFO - Proceeding despite router mismatch (soft warning only)
2025-08-16 17:55:59,601 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:55:59,601 - src.models.climate_pipeline - INFO - Timing: routing=0.3ms
2025-08-16 17:55:59,601 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:55:59,601 - src.models.query_routing - INFO - Language: japanese (ja) → Model: Nova
2025-08-16 17:55:59,601 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='気候変動とは何ですか？'
2025-08-16 17:55:59,601 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='気候変動とは何ですか？'
2025-08-16 17:55:59,601 - src.models.climate_pipeline - INFO - Net debug → original_query len=11, utf8_bytes=33
2025-08-16 17:55:59,601 - src.models.climate_pipeline - INFO - Net debug → english_query len=11, utf8_bytes=33
2025-08-16 17:55:59,601 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:55:59,601 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:55:59,603 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:55:59,603 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:55:59,604 - src.models.climate_pipeline - INFO - ✓ Cache hit for japanese - returning cached response
2025-08-16 17:55:59,605 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381359596 time=0.006s model=nova faithfulness=0.950
2025-08-16 17:55:59,606 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.010s id=req_1755381359596 ip=127.0.0.1
INFO:     127.0.0.1:50617 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:56:00,618 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381360616 query_len=24 lang=de
2025-08-16 17:56:00,618 - src.webui.api.routers.chat - INFO - Language routing: detected=de model=nova
2025-08-16 17:56:00,618 - src.models.climate_pipeline - INFO - Processing query: 'Was ist der Klimawandel?...' in german (code: de)
2025-08-16 17:56:00,618 - src.models.climate_pipeline - INFO - Raw query repr: 'Was ist der Klimawandel?'
2025-08-16 17:56:00,618 - src.models.climate_pipeline - INFO - Router IN → language_name=german, language_code=de
2025-08-16 17:56:00,618 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:56:00,618 - src.models.query_routing - INFO - Language: german (de) → Model: Nova
2025-08-16 17:56:00,618 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:56:00,618 - src.models.climate_pipeline - INFO - Router OUT → english_query='Was ist der Klimawandel?'
2025-08-16 17:56:00,618 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Was ist der Klimawandel?'
2025-08-16 17:56:00,618 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:56:00,618 - src.models.climate_pipeline - INFO - Timing: routing=0.2ms
2025-08-16 17:56:00,619 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:56:00,619 - src.models.query_routing - INFO - Language: german (de) → Model: Nova
2025-08-16 17:56:00,619 - src.models.query_routing - INFO - Translating query from german to English
2025-08-16 17:56:00,619 - src.models.query_routing - INFO - Router NET IN → query repr='Was ist der Klimawandel?'
2025-08-16 17:56:01,638 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=1019 status=OK request_id=978b1473-5366-4e9c-ac34-ab0bbe1caaf1
2025-08-16 17:56:01,638 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:56:01,638 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is Climate Change?\n\nClimate change refers to significant changes in global temperatures and weather patterns over time. These changes can occur naturally, but the term is most often used to descr'
2025-08-16 17:56:01,638 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is Climate Change?

Climate change refers to significant changes in global temperatures and weather patterns over time. These changes can occur naturally, but the term is most often used to descr'
2025-08-16 17:56:01,639 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is Climate Change?

Climate change refers to significant changes in global temperatures and weather patterns over time. These changes can occur naturally, but the term is most often used to descr'
2025-08-16 17:56:01,639 - src.models.climate_pipeline - INFO - Net debug → original_query len=24, utf8_bytes=24
2025-08-16 17:56:01,639 - src.models.climate_pipeline - INFO - Net debug → english_query len=896, utf8_bytes=902
2025-08-16 17:56:01,639 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:56:01,639 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:56:01,640 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:56:01,640 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:56:01,641 - src.models.climate_pipeline - INFO - ✓ Cache hit for german - returning cached response
2025-08-16 17:56:01,641 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381360616 time=1.023s model=nova faithfulness=0.950
2025-08-16 17:56:01,642 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=1.026s id=req_1755381360616 ip=127.0.0.1
INFO:     127.0.0.1:50630 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:56:02,676 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381362669 query_len=26 lang=sv
2025-08-16 17:56:02,676 - src.webui.api.routers.chat - INFO - Language routing: detected=sv model=nova
2025-08-16 17:56:02,676 - src.models.climate_pipeline - INFO - Processing query: 'Vad är klimatförändringar?...' in swedish (code: sv)
2025-08-16 17:56:02,679 - src.models.climate_pipeline - INFO - Raw query repr: 'Vad är klimatförändringar?'
2025-08-16 17:56:02,697 - src.models.climate_pipeline - INFO - Router IN → language_name=swedish, language_code=sv
2025-08-16 17:56:02,697 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:56:02,697 - src.models.query_routing - INFO - Language: swedish (sv) → Model: Nova
2025-08-16 17:56:02,698 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:56:02,698 - src.models.climate_pipeline - INFO - Router OUT → english_query='Vad är klimatförändringar?'
2025-08-16 17:56:02,698 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Vad är klimatförändringar?'
2025-08-16 17:56:02,698 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:56:02,698 - src.models.climate_pipeline - INFO - Timing: routing=0.1ms
2025-08-16 17:56:02,698 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:56:02,698 - src.models.query_routing - INFO - Language: swedish (sv) → Model: Nova
2025-08-16 17:56:02,698 - src.models.query_routing - INFO - Translating query from swedish to English
2025-08-16 17:56:02,698 - src.models.query_routing - INFO - Router NET IN → query repr='Vad är klimatförändringar?'
2025-08-16 17:56:03,680 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=978 status=OK request_id=0ac19a9a-e00f-45d4-804c-6adc6b1bdde5
2025-08-16 17:56:03,681 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:56:03,681 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What are climate changes?\n\nClimate change refers to significant changes in global temperatures and weather patterns over time. While climate change exists naturally, the term is most often used today '
2025-08-16 17:56:03,681 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What are climate changes?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate change exists naturally, the term is most often used today '
2025-08-16 17:56:03,681 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What are climate changes?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate change exists naturally, the term is most often used today '
2025-08-16 17:56:03,681 - src.models.climate_pipeline - INFO - Net debug → original_query len=26, utf8_bytes=29
2025-08-16 17:56:03,681 - src.models.climate_pipeline - INFO - Net debug → english_query len=779, utf8_bytes=779
2025-08-16 17:56:03,681 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:56:03,681 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:56:03,685 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:56:03,685 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:56:03,686 - src.models.climate_pipeline - INFO - ✓ Cache hit for swedish - returning cached response
2025-08-16 17:56:03,686 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381362669 time=1.010s model=nova faithfulness=0.950
2025-08-16 17:56:03,687 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=1.018s id=req_1755381362669 ip=127.0.0.1
INFO:     127.0.0.1:50650 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:56:04,696 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381364694 query_len=23 lang=da
2025-08-16 17:56:04,697 - src.webui.api.routers.chat - INFO - Language routing: detected=da model=nova
2025-08-16 17:56:04,697 - src.models.climate_pipeline - INFO - Processing query: 'Hvad er klimaændringer?...' in danish (code: da)
2025-08-16 17:56:04,697 - src.models.climate_pipeline - INFO - Raw query repr: 'Hvad er klimaændringer?'
2025-08-16 17:56:04,697 - src.models.climate_pipeline - INFO - Router IN → language_name=danish, language_code=da
2025-08-16 17:56:04,697 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:56:04,697 - src.models.query_routing - INFO - Language: danish (da) → Model: Nova
2025-08-16 17:56:04,697 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:56:04,697 - src.models.climate_pipeline - INFO - Router OUT → english_query='Hvad er klimaændringer?'
2025-08-16 17:56:04,697 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Hvad er klimaændringer?'
2025-08-16 17:56:04,697 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:56:04,697 - src.models.climate_pipeline - INFO - Timing: routing=0.2ms
2025-08-16 17:56:04,697 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:56:04,697 - src.models.query_routing - INFO - Language: danish (da) → Model: Nova
2025-08-16 17:56:04,697 - src.models.query_routing - INFO - Translating query from danish to English
2025-08-16 17:56:04,697 - src.models.query_routing - INFO - Router NET IN → query repr='Hvad er klimaændringer?'
2025-08-16 17:56:05,522 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=824 status=OK request_id=d9bb7a75-e1b6-4749-b6f9-0b579ce382eb
2025-08-16 17:56:05,522 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:56:05,522 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What are climate changes?\n\nClimate change refers to significant changes in global temperatures and weather patterns over time. While climate change is a natural phenomenon, the term is often used to d'
2025-08-16 17:56:05,523 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What are climate changes?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate change is a natural phenomenon, the term is often used to d'
2025-08-16 17:56:05,523 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What are climate changes?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate change is a natural phenomenon, the term is often used to d'
2025-08-16 17:56:05,523 - src.models.climate_pipeline - INFO - Net debug → original_query len=23, utf8_bytes=24
2025-08-16 17:56:05,523 - src.models.climate_pipeline - INFO - Net debug → english_query len=675, utf8_bytes=675
2025-08-16 17:56:05,523 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:56:05,523 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:56:05,525 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:56:05,525 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:56:05,526 - src.models.climate_pipeline - INFO - Cache miss for danish query
2025-08-16 17:56:05,535 - src.models.climate_pipeline - INFO - Timing: cache=12.6ms
2025-08-16 17:56:05,535 - src.models.climate_pipeline - INFO - Step 3: Query Rewriting
2025-08-16 17:56:05,535 - src.models.conversation_parser - INFO - No conversation history to format
2025-08-16 17:56:05,536 - src.models.climate_pipeline - INFO - Rewriter IN → expected_lang=da, history_len=0
2025-08-16 17:56:05,536 - src.models.climate_pipeline - INFO - Rewriter IN → original_query='Hvad er klimaændringer?'
2025-08-16 17:56:05,536 - query_rewriter - INFO - Rewriter NET IN → expected_lang=da, user_query repr='Hvad er klimaændringer?', norm='Hvad er klimaændringer?'
2025-08-16 17:56:06,134 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=598 status=OK request_id=c6faa13d-10a3-4b53-a7bb-ac0e53cea717
2025-08-16 17:56:06,138 - query_rewriter - INFO - Model raw (first 300): {"reason":"User query is about climate change in Danish.","language":"da","expected_language":"da","language_match":true,"classification":"on-topic","rewrite_en":"What are climate changes?","ask_how_to_use":false,"how_it_works":null,"error":null}
2025-08-16 17:56:06,139 - query_rewriter - INFO - Rewriter NET OUT → json keys=['ask_how_to_use', 'classification', 'error', 'expected_language', 'how_it_works', 'language', 'language_match', 'reason', 'rewrite_en']
2025-08-16 17:56:06,139 - query_rewriter - INFO - 🔍 CLASSIFICATION_DEBUG: query='Hvad er klimaændringer?...' expected_lang=da detected_lang=da classification=on-topic language_match=True reason='User query is about climate change in Danish....'
2025-08-16 17:56:06,139 - src.models.climate_pipeline - INFO - Rewriter OUT → detected_lang='da', classification='on-topic', language_match='yes', canned=False
2025-08-16 17:56:06,139 - src.models.climate_pipeline - INFO - Rewriter OUT → rewrite_en='What are climate changes?'
2025-08-16 17:56:06,139 - src.models.climate_pipeline - INFO - ✓ Query rewritten (JSON) for better retrieval
2025-08-16 17:56:06,139 - src.models.climate_pipeline - INFO - Timing: rewrite=603.8ms
2025-08-16 17:56:06,139 - src.models.climate_pipeline - INFO - Step 4: Input Guards
2025-08-16 17:56:06,139 - src.models.climate_pipeline - INFO - ✓ Input guards passed
2025-08-16 17:56:06,140 - src.models.climate_pipeline - INFO - Timing: guards=0.0ms
2025-08-16 17:56:06,140 - src.models.climate_pipeline - INFO - Step 5: Document Retrieval
2025-08-16 17:56:06,140 - src.models.retrieval - INFO - 🔄 Pre-computing query embeddings to avoid redundant encode() calls
2025-08-16 17:56:06,140 - src.models.retrieval - INFO - Query embedding IN: query_len=25 chars, query_repr='What are climate changes?...'
2025-08-16 17:56:07,219 - src.models.retrieval - INFO - dep=query_embed op=encode ms=1079 dense_dim=1024 sparse_tokens=5
2025-08-16 17:56:07,260 - src.models.retrieval - INFO - dep=pinecone host=unknown op=query ms=39 status=OK
2025-08-16 17:56:07,260 - src.models.retrieval - INFO - dep=hybrid_search embed_ms=0 query_ms=40 total_ms=40
2025-08-16 17:56:07,420 - src.models.retrieval - INFO - dep=pinecone host=unknown op=query ms=159 status=OK
2025-08-16 17:56:07,420 - src.models.retrieval - INFO - pinecone.match type=<class 'pinecone.core.openapi.data.model.scored_vector.ScoredVector'> attrs_have_values=True has_values=True
2025-08-16 17:56:07,420 - src.models.retrieval - INFO - dep=hybrid_search embed_ms=0 query_ms=159 total_ms=159
2025-08-16 17:56:07,422 - src.models.retrieval - INFO - dep=mmr_embed used_index=7 used_cache=0 embedded=0 ms=0 n_docs=7 valid_vecs=7 q_embed_ms=0
2025-08-16 17:56:07,423 - src.models.rerank - INFO - dep=cohere_rerank payload_chars=9389 n_docs=7
2025-08-16 17:56:07,569 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-08-16 17:56:07,577 - src.models.rerank - INFO - dep=cohere_rerank host=api.cohere.com op=rerank ms=153.7 status=OK
2025-08-16 17:56:07,578 - src.models.retrieval - INFO - Retained docs preview: [{'title': 'Health Of Canadians In Changing Climate Report', 'pinecone_score': 0.251038074, 'rerank_score': 0.9986904, 'has_values': True}, {'title': 'Canadian Communities’ Guidebook For Adaptation To Climate Change Including An Ap', 'pinecone_score': 0.228502974, 'rerank_score': 0.9981541, 'has_values': True}, {'title': 'Planning To Be A Part Of My Region! Grade 9 Lesson Plans Designed For Students I', 'pinecone_score': 0.234236374, 'rerank_score': 0.99808073, 'has_values': True}, {'title': '11356 2022 Article 19718', 'pinecone_score': 0.234831899, 'rerank_score': 0.9956176, 'has_values': True}, {'title': 'Climate Change 2021 Summary For All', 'pinecone_score': 0.252884656, 'rerank_score': 0.99341017, 'has_values': True}]
2025-08-16 17:56:07,578 - src.models.retrieval - INFO - q='What are climate changes?', base=7, kept_pre=7, refill=0, final_before=5, final_after=5, hybrid_refill=0, floor=0.60, delta=0.100, max_sim_pre=0.253, p50_sim_pre=0.234, p95_sim_pre=0.253, blocked_base=0, dropped_top2=[{'segment_id': '18', 'title': 'Adapting To Climate Change A Risk Based Guide For Local Governments', 'score': 0.25423113}, {'segment_id': '386', 'title': "Canada's Changing Climate Report 2019", 'score': 0.25256836}]
2025-08-16 17:56:07,578 - src.models.climate_pipeline - INFO - ✓ Retrieved 5 documents
2025-08-16 17:56:07,579 - src.models.climate_pipeline - INFO - Timing: retrieval=1439.0ms
2025-08-16 17:56:07,579 - src.models.climate_pipeline - INFO - Step 6: Response Generation (Nova)
2025-08-16 17:56:07,579 - src.models.gen_response_unified - INFO - Starting nova response generation
2025-08-16 17:56:07,579 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:56:07,582 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:56:07,582 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:56:07,592 - src.models.gen_response_unified - INFO - Successfully processed 5 documents
2025-08-16 17:56:07,592 - src.models.gen_response_unified - INFO - Successfully processed 5 documents for nova
2025-08-16 17:56:12,385 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=4791 status=OK request_id=bdfafa67-5701-46ed-a7bc-3567569a1a8b
2025-08-16 17:56:12,393 - src.models.gen_response_unified - INFO - nova response cached successfully
2025-08-16 17:56:12,393 - src.models.gen_response_unified - INFO - nova response generation complete
2025-08-16 17:56:12,394 - src.models.climate_pipeline - INFO - ✓ Response generated successfully in English
2025-08-16 17:56:12,394 - src.models.climate_pipeline - INFO - Timing: generation=4815.0ms
2025-08-16 17:56:12,394 - src.models.climate_pipeline - INFO - Step 7: Quality Validation
2025-08-16 17:56:14,711 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=2316 status=OK request_id=562be18f-1ab3-47fe-80e2-444b927df84b
2025-08-16 17:56:14,712 - src.models.hallucination_guard - INFO - Faithfulness score: 0.95
2025-08-16 17:56:14,712 - src.models.climate_pipeline - INFO - ✓ Faithfulness score: 0.950
2025-08-16 17:56:14,712 - src.models.climate_pipeline - INFO - ✓ Assessment: Highly Faithful
2025-08-16 17:56:14,712 - src.models.climate_pipeline - INFO - Timing: faithfulness=2318.8ms
2025-08-16 17:56:14,712 - src.models.climate_pipeline - INFO - Step 8: Translating response to danish (code=da)
2025-08-16 17:56:26,697 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=11984 status=OK request_id=95d80cb9-1d55-4455-beed-c8f8fdbc6353
2025-08-16 17:56:26,700 - src.models.climate_pipeline - INFO - ✓ Response translated successfully to danish
2025-08-16 17:56:26,701 - src.models.climate_pipeline - INFO - Timing: translation=11988.1ms
2025-08-16 17:56:26,701 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:56:26,705 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:56:26,706 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:56:26,711 - src.models.climate_pipeline - INFO - ✓ Response cached in danish
2025-08-16 17:56:26,715 - src.models.climate_pipeline - INFO - ✓ English version also cached
2025-08-16 17:56:26,717 - src.models.climate_pipeline - INFO - Timing summary (ms): routing=0.2 rewrite=603.8 guards=0.0 retrieval=1439.0 generation=4815.0 faithfulness=2318.8 translation=11988.1 total=22003.7
2025-08-16 17:56:26,717 - src.models.climate_pipeline - INFO - ✓ Query processed successfully in 22.00s
2025-08-16 17:56:26,718 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381364694 time=22.022s model=nova faithfulness=0.950
2025-08-16 17:56:26,721 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=22.026s id=req_1755381364694 ip=127.0.0.1
INFO:     127.0.0.1:50672 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:56:27,756 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381387752 query_len=22 lang=no
2025-08-16 17:56:27,756 - src.webui.api.routers.chat - INFO - Language routing: detected=no model=nova
2025-08-16 17:56:27,757 - src.models.climate_pipeline - INFO - Processing query: 'Hva er klimaendringer?...' in norwegian (code: no)
2025-08-16 17:56:27,757 - src.models.climate_pipeline - INFO - Raw query repr: 'Hva er klimaendringer?'
2025-08-16 17:56:27,757 - src.models.climate_pipeline - INFO - Router IN → language_name=norwegian, language_code=no
2025-08-16 17:56:27,757 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:56:27,757 - src.models.query_routing - INFO - Language: norwegian (no) → Model: Nova
2025-08-16 17:56:27,757 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:56:27,757 - src.models.climate_pipeline - INFO - Router OUT → english_query='Hva er klimaendringer?'
2025-08-16 17:56:27,757 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Hva er klimaendringer?'
2025-08-16 17:56:27,757 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:56:27,757 - src.models.climate_pipeline - INFO - Timing: routing=0.3ms
2025-08-16 17:56:27,757 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:56:27,757 - src.models.query_routing - INFO - Language: norwegian (no) → Model: Nova
2025-08-16 17:56:27,757 - src.models.query_routing - INFO - Translating query from norwegian to English
2025-08-16 17:56:27,757 - src.models.query_routing - INFO - Router NET IN → query repr='Hva er klimaendringer?'
2025-08-16 17:56:28,772 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=1014 status=OK request_id=99125aad-5343-4b13-819a-168f61086bc0
2025-08-16 17:56:28,772 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:56:28,773 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What are climate changes?\n\nClimate change refers to significant changes in global temperatures and weather patterns over time. While climate variability is a natural phenomenon, the term "climate chan'
2025-08-16 17:56:28,773 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What are climate changes?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate variability is a natural phenomenon, the term "climate chan'
2025-08-16 17:56:28,773 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What are climate changes?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate variability is a natural phenomenon, the term "climate chan'
2025-08-16 17:56:28,773 - src.models.climate_pipeline - INFO - Net debug → original_query len=22, utf8_bytes=22
2025-08-16 17:56:28,773 - src.models.climate_pipeline - INFO - Net debug → english_query len=644, utf8_bytes=644
2025-08-16 17:56:28,773 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:56:28,773 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:56:28,775 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:56:28,775 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:56:28,778 - src.models.climate_pipeline - INFO - ✓ Cache hit for norwegian - returning cached response
2025-08-16 17:56:28,778 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381387752 time=1.022s model=nova faithfulness=0.950
2025-08-16 17:56:28,778 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=1.026s id=req_1755381387752 ip=127.0.0.1
INFO:     127.0.0.1:50895 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:56:29,787 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381389786 query_len=23 lang=fi
2025-08-16 17:56:29,787 - src.webui.api.routers.chat - INFO - Language routing: detected=fi model=nova
2025-08-16 17:56:29,787 - src.models.climate_pipeline - INFO - Processing query: 'Mitä on ilmastonmuutos?...' in finnish (code: fi)
2025-08-16 17:56:29,787 - src.models.climate_pipeline - INFO - Raw query repr: 'Mitä on ilmastonmuutos?'
2025-08-16 17:56:29,787 - src.models.climate_pipeline - INFO - Router IN → language_name=finnish, language_code=fi
2025-08-16 17:56:29,787 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:56:29,787 - src.models.query_routing - INFO - Language: finnish (fi) → Model: Nova
2025-08-16 17:56:29,787 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:56:29,787 - src.models.climate_pipeline - INFO - Router OUT → english_query='Mitä on ilmastonmuutos?'
2025-08-16 17:56:29,787 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Mitä on ilmastonmuutos?'
2025-08-16 17:56:29,787 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:56:29,787 - src.models.climate_pipeline - INFO - Timing: routing=0.1ms
2025-08-16 17:56:29,787 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:56:29,787 - src.models.query_routing - INFO - Language: finnish (fi) → Model: Nova
2025-08-16 17:56:29,787 - src.models.query_routing - INFO - Translating query from finnish to English
2025-08-16 17:56:29,787 - src.models.query_routing - INFO - Router NET IN → query repr='Mitä on ilmastonmuutos?'
2025-08-16 17:56:30,568 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=781 status=OK request_id=2cef8d75-b556-45ac-b7ef-e4dcf9d6698f
2025-08-16 17:56:30,569 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:56:30,569 - src.models.query_routing - INFO - Router NET OUT → english_query repr="What is climate change?\n\nClimate change refers to significant changes in global temperatures and weather patterns over time. While climate variability has existed throughout Earth's history, the term "
2025-08-16 17:56:30,569 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate variability has existed throughout Earth's history, the term '
2025-08-16 17:56:30,569 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate variability has existed throughout Earth's history, the term '
2025-08-16 17:56:30,569 - src.models.climate_pipeline - INFO - Net debug → original_query len=23, utf8_bytes=24
2025-08-16 17:56:30,569 - src.models.climate_pipeline - INFO - Net debug → english_query len=681, utf8_bytes=681
2025-08-16 17:56:30,569 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:56:30,569 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:56:30,571 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:56:30,572 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:56:30,574 - src.models.climate_pipeline - INFO - ✓ Cache hit for finnish - returning cached response
2025-08-16 17:56:30,574 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381389786 time=0.787s model=nova faithfulness=0.900
2025-08-16 17:56:30,575 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.789s id=req_1755381389786 ip=127.0.0.1
INFO:     127.0.0.1:50914 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:56:31,589 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381391587 query_len=31 lang=it
2025-08-16 17:56:31,590 - src.webui.api.routers.chat - INFO - Language routing: detected=it model=nova
2025-08-16 17:56:31,590 - src.models.climate_pipeline - INFO - Processing query: 'Cos'è il cambiamento climatico?...' in italian (code: it)
2025-08-16 17:56:31,590 - src.models.climate_pipeline - INFO - Raw query repr: "Cos'è il cambiamento climatico?"
2025-08-16 17:56:31,590 - src.models.climate_pipeline - INFO - Router IN → language_name=italian, language_code=it
2025-08-16 17:56:31,590 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:56:31,590 - src.models.query_routing - INFO - Language: italian (it) → Model: Nova
2025-08-16 17:56:31,590 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:56:31,590 - src.models.climate_pipeline - INFO - Router OUT → english_query='Cos'è il cambiamento climatico?'
2025-08-16 17:56:31,590 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Cos'è il cambiamento climatico?'
2025-08-16 17:56:31,590 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:56:31,590 - src.models.climate_pipeline - INFO - Timing: routing=0.1ms
2025-08-16 17:56:31,590 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:56:31,590 - src.models.query_routing - INFO - Language: italian (it) → Model: Nova
2025-08-16 17:56:31,590 - src.models.query_routing - INFO - Translating query from italian to English
2025-08-16 17:56:31,590 - src.models.query_routing - INFO - Router NET IN → query repr="Cos'è il cambiamento climatico?"
2025-08-16 17:56:32,341 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=750 status=OK request_id=8a14a93d-4a7a-41e6-a0d2-57c720768229
2025-08-16 17:56:32,341 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:56:32,341 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?\n\nClimate change refers to significant changes in global temperatures and weather patterns over time. These changes can occur naturally, but the term is most often used to descr'
2025-08-16 17:56:32,342 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. These changes can occur naturally, but the term is most often used to descr'
2025-08-16 17:56:32,342 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. These changes can occur naturally, but the term is most often used to descr'
2025-08-16 17:56:32,342 - src.models.climate_pipeline - INFO - Net debug → original_query len=31, utf8_bytes=32
2025-08-16 17:56:32,342 - src.models.climate_pipeline - INFO - Net debug → english_query len=665, utf8_bytes=665
2025-08-16 17:56:32,342 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:56:32,342 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:56:32,344 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:56:32,344 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:56:32,346 - src.models.climate_pipeline - INFO - ✓ Cache hit for italian - returning cached response
2025-08-16 17:56:32,346 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381391587 time=0.757s model=nova faithfulness=0.950
2025-08-16 17:56:32,347 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.760s id=req_1755381391587 ip=127.0.0.1
INFO:     127.0.0.1:50933 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:56:33,356 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381393354 query_len=26 lang=pt
2025-08-16 17:56:33,356 - src.webui.api.routers.chat - INFO - Language routing: detected=pt model=nova
2025-08-16 17:56:33,356 - src.models.climate_pipeline - INFO - Processing query: 'O que é mudança climática?...' in portuguese (code: pt)
2025-08-16 17:56:33,356 - src.models.climate_pipeline - INFO - Raw query repr: 'O que é mudança climática?'
2025-08-16 17:56:33,356 - src.models.climate_pipeline - INFO - Router IN → language_name=portuguese, language_code=pt
2025-08-16 17:56:33,356 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:56:33,356 - src.models.query_routing - INFO - Language: portuguese (pt) → Model: Nova
2025-08-16 17:56:33,356 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:56:33,356 - src.models.climate_pipeline - INFO - Router OUT → english_query='O que é mudança climática?'
2025-08-16 17:56:33,356 - src.models.climate_pipeline - INFO - Router OUT → processed_query='O que é mudança climática?'
2025-08-16 17:56:33,356 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:56:33,357 - src.models.climate_pipeline - INFO - Timing: routing=0.1ms
2025-08-16 17:56:33,357 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:56:33,357 - src.models.query_routing - INFO - Language: portuguese (pt) → Model: Nova
2025-08-16 17:56:33,357 - src.models.query_routing - INFO - Translating query from portuguese to English
2025-08-16 17:56:33,357 - src.models.query_routing - INFO - Router NET IN → query repr='O que é mudança climática?'
2025-08-16 17:56:34,098 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=740 status=OK request_id=adacb29a-f8f1-4eed-ab02-506b837df066
2025-08-16 17:56:34,098 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:56:34,098 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?\n\nClimate change refers to significant changes in global temperatures and weather patterns over time. Long-term shifts in temperature and weather patterns are primarily driven b'
2025-08-16 17:56:34,098 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. Long-term shifts in temperature and weather patterns are primarily driven b'
2025-08-16 17:56:34,098 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. Long-term shifts in temperature and weather patterns are primarily driven b'
2025-08-16 17:56:34,098 - src.models.climate_pipeline - INFO - Net debug → original_query len=26, utf8_bytes=29
2025-08-16 17:56:34,098 - src.models.climate_pipeline - INFO - Net debug → english_query len=688, utf8_bytes=692
2025-08-16 17:56:34,098 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:56:34,099 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:56:34,102 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:56:34,102 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:56:34,102 - src.models.climate_pipeline - INFO - Cache miss for portuguese query
2025-08-16 17:56:34,103 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:56:34,104 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:56:34,104 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:56:34,105 - src.models.climate_pipeline - INFO - ✓ Cache hit via fuzzy match (score=0.97)
2025-08-16 17:56:34,106 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381393354 time=0.750s model=nova faithfulness=0.950
2025-08-16 17:56:34,106 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.752s id=req_1755381393354 ip=127.0.0.1
INFO:     127.0.0.1:50952 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:56:35,125 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381395119 query_len=19 lang=hu
2025-08-16 17:56:35,125 - src.webui.api.routers.chat - INFO - Language routing: detected=hu model=nova
2025-08-16 17:56:35,126 - src.models.climate_pipeline - INFO - Processing query: 'Mi a klímaváltozás?...' in hungarian (code: hu)
2025-08-16 17:56:35,126 - src.models.climate_pipeline - INFO - Raw query repr: 'Mi a klímaváltozás?'
2025-08-16 17:56:35,126 - src.models.climate_pipeline - INFO - Router IN → language_name=hungarian, language_code=hu
2025-08-16 17:56:35,126 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:56:35,126 - src.models.query_routing - INFO - Language: hungarian (hu) → Model: Nova
2025-08-16 17:56:35,126 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:56:35,126 - src.models.climate_pipeline - INFO - Router OUT → english_query='Mi a klímaváltozás?'
2025-08-16 17:56:35,126 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Mi a klímaváltozás?'
2025-08-16 17:56:35,126 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:56:35,126 - src.models.climate_pipeline - INFO - Timing: routing=0.2ms
2025-08-16 17:56:35,126 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:56:35,126 - src.models.query_routing - INFO - Language: hungarian (hu) → Model: Nova
2025-08-16 17:56:35,126 - src.models.query_routing - INFO - Translating query from hungarian to English
2025-08-16 17:56:35,126 - src.models.query_routing - INFO - Router NET IN → query repr='Mi a klímaváltozás?'
2025-08-16 17:56:35,323 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=196 status=OK request_id=3a08ee34-a084-4162-8afb-1439bf6f4edc
2025-08-16 17:56:35,328 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:56:35,328 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?'
2025-08-16 17:56:35,328 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?'
2025-08-16 17:56:35,328 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?'
2025-08-16 17:56:35,328 - src.models.climate_pipeline - INFO - Net debug → original_query len=19, utf8_bytes=22
2025-08-16 17:56:35,328 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:56:35,328 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:56:35,329 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:56:35,342 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:56:35,342 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:56:35,343 - src.models.climate_pipeline - INFO - ✓ Cache hit for hungarian - returning cached response
2025-08-16 17:56:35,344 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381395119 time=0.219s model=nova faithfulness=0.950
2025-08-16 17:56:35,344 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.225s id=req_1755381395119 ip=127.0.0.1
INFO:     127.0.0.1:50968 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:56:36,351 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381396350 query_len=18 lang=sk
2025-08-16 17:56:36,351 - src.webui.api.routers.chat - INFO - Language routing: detected=sk model=nova
2025-08-16 17:56:36,351 - src.models.climate_pipeline - INFO - Processing query: 'Čo je zmena klímy?...' in slovak (code: sk)
2025-08-16 17:56:36,351 - src.models.climate_pipeline - INFO - Raw query repr: 'Čo je zmena klímy?'
2025-08-16 17:56:36,351 - src.models.climate_pipeline - INFO - Router IN → language_name=slovak, language_code=sk
2025-08-16 17:56:36,351 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:56:36,351 - src.models.query_routing - INFO - Language: slovak (sk) → Model: Nova
2025-08-16 17:56:36,351 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:56:36,351 - src.models.climate_pipeline - INFO - Router OUT → english_query='Čo je zmena klímy?'
2025-08-16 17:56:36,351 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Čo je zmena klímy?'
2025-08-16 17:56:36,351 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:56:36,351 - src.models.climate_pipeline - INFO - Timing: routing=0.1ms
2025-08-16 17:56:36,351 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:56:36,351 - src.models.query_routing - INFO - Language: slovak (sk) → Model: Nova
2025-08-16 17:56:36,351 - src.models.query_routing - INFO - Translating query from slovak to English
2025-08-16 17:56:36,351 - src.models.query_routing - INFO - Router NET IN → query repr='Čo je zmena klímy?'
2025-08-16 17:56:36,547 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=195 status=OK request_id=1447b257-620e-4093-9757-e68e0b16b448
2025-08-16 17:56:36,547 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:56:36,547 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?'
2025-08-16 17:56:36,547 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?'
2025-08-16 17:56:36,547 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?'
2025-08-16 17:56:36,547 - src.models.climate_pipeline - INFO - Net debug → original_query len=18, utf8_bytes=20
2025-08-16 17:56:36,547 - src.models.climate_pipeline - INFO - Net debug → english_query len=23, utf8_bytes=23
2025-08-16 17:56:36,547 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:56:36,547 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:56:36,550 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:56:36,550 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:56:36,553 - src.models.climate_pipeline - INFO - ✓ Cache hit for slovak - returning cached response
2025-08-16 17:56:36,553 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381396350 time=0.203s model=nova faithfulness=0.950
2025-08-16 17:56:36,554 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.204s id=req_1755381396350 ip=127.0.0.1
INFO:     127.0.0.1:50983 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:56:37,564 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381397562 query_len=26 lang=sl
2025-08-16 17:56:37,564 - src.webui.api.routers.chat - INFO - Language routing: detected=sl model=nova
2025-08-16 17:56:37,564 - src.models.climate_pipeline - INFO - Processing query: 'Kaj je podnebna sprememba?...' in slovenian (code: sl)
2025-08-16 17:56:37,564 - src.models.climate_pipeline - INFO - Raw query repr: 'Kaj je podnebna sprememba?'
2025-08-16 17:56:37,564 - src.models.climate_pipeline - INFO - Router IN → language_name=slovenian, language_code=sl
2025-08-16 17:56:37,564 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:56:37,564 - src.models.query_routing - INFO - Language: slovenian (sl) → Model: Nova
2025-08-16 17:56:37,564 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:56:37,564 - src.models.climate_pipeline - INFO - Router OUT → english_query='Kaj je podnebna sprememba?'
2025-08-16 17:56:37,564 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Kaj je podnebna sprememba?'
2025-08-16 17:56:37,564 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:56:37,564 - src.models.climate_pipeline - INFO - Timing: routing=0.1ms
2025-08-16 17:56:37,564 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:56:37,564 - src.models.query_routing - INFO - Language: slovenian (sl) → Model: Nova
2025-08-16 17:56:37,564 - src.models.query_routing - INFO - Translating query from slovenian to English
2025-08-16 17:56:37,564 - src.models.query_routing - INFO - Router NET IN → query repr='Kaj je podnebna sprememba?'
2025-08-16 17:56:38,390 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=825 status=OK request_id=88c5eb27-9845-44bb-8d01-3a3234f334a6
2025-08-16 17:56:38,391 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:56:38,391 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?\n\nClimate change refers to significant changes in global temperatures and weather patterns over time. While climate change poses a natural phenomenon, the term is often used tod'
2025-08-16 17:56:38,391 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate change poses a natural phenomenon, the term is often used tod'
2025-08-16 17:56:38,391 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. While climate change poses a natural phenomenon, the term is often used tod'
2025-08-16 17:56:38,391 - src.models.climate_pipeline - INFO - Net debug → original_query len=26, utf8_bytes=26
2025-08-16 17:56:38,391 - src.models.climate_pipeline - INFO - Net debug → english_query len=494, utf8_bytes=494
2025-08-16 17:56:38,391 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:56:38,391 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:56:38,393 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:56:38,393 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:56:38,393 - src.models.climate_pipeline - INFO - Cache miss for slovenian query
2025-08-16 17:56:38,395 - src.models.climate_pipeline - INFO - Timing: cache=4.2ms
2025-08-16 17:56:38,395 - src.models.climate_pipeline - INFO - Step 3: Query Rewriting
2025-08-16 17:56:38,395 - src.models.conversation_parser - INFO - No conversation history to format
2025-08-16 17:56:38,396 - src.models.climate_pipeline - INFO - Rewriter IN → expected_lang=sl, history_len=0
2025-08-16 17:56:38,396 - src.models.climate_pipeline - INFO - Rewriter IN → original_query='Kaj je podnebna sprememba?'
2025-08-16 17:56:38,396 - query_rewriter - INFO - Rewriter NET IN → expected_lang=sl, user_query repr='Kaj je podnebna sprememba?', norm='Kaj je podnebna sprememba?'
2025-08-16 17:56:39,212 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=815 status=OK request_id=7600dacc-271e-4a59-80b0-70e61a2c3760
2025-08-16 17:56:39,212 - query_rewriter - INFO - Model raw (first 300): {"reason":"User query is in Slovenian and asks about climate change.","language":"sl","expected_language":"sl","language_match":true,"classification":"on-topic","rewrite_en":"What is climate change?","ask_how_to_use":false,"how_it_works":null,"error":null}
2025-08-16 17:56:39,212 - query_rewriter - INFO - Rewriter NET OUT → json keys=['ask_how_to_use', 'classification', 'error', 'expected_language', 'how_it_works', 'language', 'language_match', 'reason', 'rewrite_en']
2025-08-16 17:56:39,212 - query_rewriter - INFO - 🔍 CLASSIFICATION_DEBUG: query='Kaj je podnebna sprememba?...' expected_lang=sl detected_lang=sl classification=on-topic language_match=True reason='User query is in Slovenian and asks about climate change....'
2025-08-16 17:56:39,212 - src.models.climate_pipeline - INFO - Rewriter OUT → detected_lang='sl', classification='on-topic', language_match='yes', canned=False
2025-08-16 17:56:39,212 - src.models.climate_pipeline - INFO - Rewriter OUT → rewrite_en='What is climate change?'
2025-08-16 17:56:39,212 - src.models.climate_pipeline - INFO - ✓ Query rewritten (JSON) for better retrieval
2025-08-16 17:56:39,212 - src.models.climate_pipeline - INFO - Timing: rewrite=816.9ms
2025-08-16 17:56:39,212 - src.models.climate_pipeline - INFO - Step 4: Input Guards
2025-08-16 17:56:39,212 - src.models.climate_pipeline - INFO - ✓ Input guards passed
2025-08-16 17:56:39,212 - src.models.climate_pipeline - INFO - Timing: guards=0.0ms
2025-08-16 17:56:39,212 - src.models.climate_pipeline - INFO - Step 5: Document Retrieval
2025-08-16 17:56:39,213 - src.models.retrieval - INFO - 🔄 Pre-computing query embeddings to avoid redundant encode() calls
2025-08-16 17:56:39,213 - src.models.retrieval - INFO - Query embedding IN: query_len=23 chars, query_repr='What is climate change?...'
2025-08-16 17:56:39,858 - src.models.retrieval - INFO - dep=query_embed op=encode ms=645 dense_dim=1024 sparse_tokens=5
2025-08-16 17:56:39,902 - src.models.retrieval - INFO - dep=pinecone host=unknown op=query ms=43 status=OK
2025-08-16 17:56:39,902 - src.models.retrieval - INFO - dep=hybrid_search embed_ms=0 query_ms=43 total_ms=43
2025-08-16 17:56:40,020 - src.models.retrieval - INFO - dep=pinecone host=unknown op=query ms=117 status=OK
2025-08-16 17:56:40,020 - src.models.retrieval - INFO - pinecone.match type=<class 'pinecone.core.openapi.data.model.scored_vector.ScoredVector'> attrs_have_values=True has_values=True
2025-08-16 17:56:40,020 - src.models.retrieval - INFO - dep=hybrid_search embed_ms=0 query_ms=118 total_ms=118
2025-08-16 17:56:40,022 - src.models.retrieval - INFO - dep=mmr_embed used_index=7 used_cache=0 embedded=0 ms=0 n_docs=7 valid_vecs=7 q_embed_ms=0
2025-08-16 17:56:40,023 - src.models.rerank - INFO - dep=cohere_rerank payload_chars=8944 n_docs=7
2025-08-16 17:56:40,163 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-08-16 17:56:40,168 - src.models.rerank - INFO - dep=cohere_rerank host=api.cohere.com op=rerank ms=144.5 status=OK
2025-08-16 17:56:40,170 - src.models.retrieval - INFO - Retained docs preview: [{'title': 'Health Of Canadians In Changing Climate Report', 'pinecone_score': 0.280184954, 'rerank_score': 0.9995272, 'has_values': True}, {'title': 'Canadian Communities’ Guidebook For Adaptation To Climate Change Including An Ap', 'pinecone_score': 0.26793474, 'rerank_score': 0.99945575, 'has_values': True}, {'title': 'Planning To Be A Part Of My Region! Grade 9 Lesson Plans Designed For Students I', 'pinecone_score': 0.271402389, 'rerank_score': 0.9993881, 'has_values': True}, {'title': "Report For Action Toronto's Climate Change Readiness Updates Oncommitments And A", 'pinecone_score': 0.274087071, 'rerank_score': 0.99843913, 'has_values': True}, {'title': '11356 2022 Article 19718', 'pinecone_score': 0.270209789, 'rerank_score': 0.9980354, 'has_values': True}]
2025-08-16 17:56:40,171 - src.models.retrieval - INFO - q='What is climate change?', base=7, kept_pre=7, refill=0, final_before=5, final_after=5, hybrid_refill=0, floor=0.95, delta=0.100, max_sim_pre=0.280, p50_sim_pre=0.271, p95_sim_pre=0.280, blocked_base=0, dropped_top2=[]
2025-08-16 17:56:40,171 - src.models.climate_pipeline - INFO - ✓ Retrieved 5 documents
2025-08-16 17:56:40,171 - src.models.climate_pipeline - INFO - Timing: retrieval=958.4ms
2025-08-16 17:56:40,171 - src.models.climate_pipeline - INFO - Step 6: Response Generation (Nova)
2025-08-16 17:56:40,171 - src.models.gen_response_unified - INFO - Starting nova response generation
2025-08-16 17:56:40,171 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:56:40,174 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:56:40,174 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:56:40,175 - src.models.gen_response_unified - INFO - Cache hit for nova - returning cached response
2025-08-16 17:56:40,175 - src.models.climate_pipeline - INFO - ✓ Response generated successfully in English
2025-08-16 17:56:40,175 - src.models.climate_pipeline - INFO - Timing: generation=3.8ms
2025-08-16 17:56:40,175 - src.models.climate_pipeline - INFO - Step 7: Quality Validation
2025-08-16 17:56:41,261 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=1085 status=OK request_id=e92ec0b5-71bf-4b56-ae0c-1539f837b00b
2025-08-16 17:56:41,261 - src.models.hallucination_guard - INFO - Faithfulness score: 0.9
2025-08-16 17:56:41,262 - src.models.climate_pipeline - INFO - ✓ Faithfulness score: 0.900
2025-08-16 17:56:41,262 - src.models.climate_pipeline - INFO - ✓ Assessment: Highly Faithful
2025-08-16 17:56:41,262 - src.models.climate_pipeline - INFO - Timing: faithfulness=1087.0ms
2025-08-16 17:56:41,262 - src.models.climate_pipeline - INFO - Step 8: Translating response to slovenian (code=sl)
2025-08-16 17:56:52,076 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=10813 status=OK request_id=8f849b61-90a2-491a-be09-9c1c8d6bcb09
2025-08-16 17:56:52,092 - src.models.climate_pipeline - INFO - ✓ Response translated successfully to slovenian
2025-08-16 17:56:52,092 - src.models.climate_pipeline - INFO - Timing: translation=10830.2ms
2025-08-16 17:56:52,095 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:56:52,107 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:56:52,107 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:56:52,109 - src.models.climate_pipeline - INFO - ✓ Response cached in slovenian
2025-08-16 17:56:52,110 - src.models.climate_pipeline - INFO - ✓ English version also cached
2025-08-16 17:56:52,111 - src.models.climate_pipeline - INFO - Timing summary (ms): routing=0.1 rewrite=816.9 guards=0.0 retrieval=958.4 generation=3.8 faithfulness=1087.0 translation=10830.2 total=14528.1
2025-08-16 17:56:52,111 - src.models.climate_pipeline - INFO - ✓ Query processed successfully in 14.53s
2025-08-16 17:56:52,115 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381397562 time=14.552s model=nova faithfulness=0.900
2025-08-16 17:56:52,117 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=14.555s id=req_1755381397562 ip=127.0.0.1
INFO:     127.0.0.1:50998 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:56:53,152 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381413148 query_len=31 lang=bg
2025-08-16 17:56:53,152 - src.webui.api.routers.chat - INFO - Language routing: detected=bg model=nova
2025-08-16 17:56:53,153 - src.models.climate_pipeline - INFO - Processing query: 'Какво е изменението на климата?...' in bulgarian (code: bg)
2025-08-16 17:56:53,153 - src.models.climate_pipeline - INFO - Raw query repr: 'Какво е изменението на климата?'
2025-08-16 17:56:53,153 - src.models.climate_pipeline - INFO - Router IN → language_name=bulgarian, language_code=bg
2025-08-16 17:56:53,153 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:56:53,153 - src.models.query_routing - INFO - Language: bulgarian (bg) → Model: Nova
2025-08-16 17:56:53,153 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:56:53,153 - src.models.climate_pipeline - INFO - Router OUT → english_query='Какво е изменението на климата?'
2025-08-16 17:56:53,154 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Какво е изменението на климата?'
2025-08-16 17:56:53,154 - src.models.climate_pipeline - WARNING - Router language mismatch: query is in Russian but Bulgarian was selected
2025-08-16 17:56:53,154 - src.models.climate_pipeline - INFO - Proceeding despite router mismatch (soft warning only)
2025-08-16 17:56:53,154 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:56:53,154 - src.models.climate_pipeline - INFO - Timing: routing=0.8ms
2025-08-16 17:56:53,154 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:56:53,154 - src.models.query_routing - INFO - Language: bulgarian (bg) → Model: Nova
2025-08-16 17:56:53,154 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='Какво е изменението на климата?'
2025-08-16 17:56:53,154 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='Какво е изменението на климата?'
2025-08-16 17:56:53,154 - src.models.climate_pipeline - INFO - Net debug → original_query len=31, utf8_bytes=57
2025-08-16 17:56:53,154 - src.models.climate_pipeline - INFO - Net debug → english_query len=31, utf8_bytes=57
2025-08-16 17:56:53,154 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:56:53,154 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:56:53,174 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:56:53,177 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:56:53,201 - src.models.climate_pipeline - INFO - ✓ Cache hit for bulgarian - returning cached response
2025-08-16 17:56:53,202 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381413148 time=0.051s model=nova faithfulness=0.950
2025-08-16 17:56:53,204 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=0.057s id=req_1755381413148 ip=127.0.0.1
INFO:     127.0.0.1:51134 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
2025-08-16 17:56:54,214 - src.webui.api.routers.chat - INFO - Processing chat query: id=req_1755381414212 query_len=22 lang=hr
2025-08-16 17:56:54,214 - src.webui.api.routers.chat - INFO - Language routing: detected=hr model=nova
2025-08-16 17:56:54,214 - src.models.climate_pipeline - INFO - Processing query: 'Što je promjena klime?...' in croatian (code: hr)
2025-08-16 17:56:54,215 - src.models.climate_pipeline - INFO - Raw query repr: 'Što je promjena klime?'
2025-08-16 17:56:54,215 - src.models.climate_pipeline - INFO - Router IN → language_name=croatian, language_code=hr
2025-08-16 17:56:54,215 - src.models.climate_pipeline - INFO - Step 1: Query Routing
2025-08-16 17:56:54,215 - src.models.query_routing - INFO - Language: croatian (hr) → Model: Nova
2025-08-16 17:56:54,215 - src.models.climate_pipeline - INFO - Router OUT → model=Nova, support=nova, needs_translation=True
2025-08-16 17:56:54,215 - src.models.climate_pipeline - INFO - Router OUT → english_query='Što je promjena klime?'
2025-08-16 17:56:54,215 - src.models.climate_pipeline - INFO - Router OUT → processed_query='Što je promjena klime?'
2025-08-16 17:56:54,215 - src.models.climate_pipeline - INFO - ✓ Routed to Nova model
2025-08-16 17:56:54,215 - src.models.climate_pipeline - INFO - Timing: routing=0.2ms
2025-08-16 17:56:54,215 - src.models.climate_pipeline - INFO - Routing requires translation → provider=Nova
2025-08-16 17:56:54,215 - src.models.query_routing - INFO - Language: croatian (hr) → Model: Nova
2025-08-16 17:56:54,215 - src.models.query_routing - INFO - Translating query from croatian to English
2025-08-16 17:56:54,215 - src.models.query_routing - INFO - Router NET IN → query repr='Što je promjena klime?'
2025-08-16 17:56:54,820 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=605 status=OK request_id=a712c34a-e638-4631-9ee9-58dcd5f1d24d
2025-08-16 17:56:54,827 - src.models.query_routing - INFO - Translation successful
2025-08-16 17:56:54,828 - src.models.query_routing - INFO - Router NET OUT → english_query repr='What is climate change?\n\nClimate change refers to significant changes in global temperatures and weather patterns over time. These changes can occur naturally, but the term is most often used to descr'
2025-08-16 17:56:54,828 - src.models.climate_pipeline - INFO - Router RERUN OUT → english_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. These changes can occur naturally, but the term is most often used to descr'
2025-08-16 17:56:54,828 - src.models.climate_pipeline - INFO - Router RERUN OUT → processed_query='What is climate change?

Climate change refers to significant changes in global temperatures and weather patterns over time. These changes can occur naturally, but the term is most often used to descr'
2025-08-16 17:56:54,828 - src.models.climate_pipeline - INFO - Net debug → original_query len=22, utf8_bytes=23
2025-08-16 17:56:54,828 - src.models.climate_pipeline - INFO - Net debug → english_query len=528, utf8_bytes=528
2025-08-16 17:56:54,828 - src.models.climate_pipeline - INFO - Step 2: Cache Check
2025-08-16 17:56:54,828 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:56:54,875 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:56:54,875 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:56:54,876 - src.models.climate_pipeline - INFO - Cache miss for croatian query
2025-08-16 17:56:54,881 - src.models.climate_pipeline - INFO - Timing: cache=53.4ms
2025-08-16 17:56:54,881 - src.models.climate_pipeline - INFO - Step 3: Query Rewriting
2025-08-16 17:56:54,881 - src.models.conversation_parser - INFO - No conversation history to format
2025-08-16 17:56:54,881 - src.models.climate_pipeline - INFO - Rewriter IN → expected_lang=hr, history_len=0
2025-08-16 17:56:54,881 - src.models.climate_pipeline - INFO - Rewriter IN → original_query='Što je promjena klime?'
2025-08-16 17:56:54,882 - query_rewriter - INFO - Rewriter NET IN → expected_lang=hr, user_query repr='Što je promjena klime?', norm='Što je promjena klime?'
2025-08-16 17:56:55,458 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=576 status=OK request_id=c458b038-ba71-4710-ad08-2b7cbd8ffa9e
2025-08-16 17:56:55,459 - query_rewriter - INFO - Model raw (first 300): {"reason":"User query is in Croatian and asks about climate change.","language":"hr","expected_language":"hr","language_match":true,"classification":"on-topic","rewrite_en":"What is climate change?","ask_how_to_use":false,"how_it_works":null,"error":null}
2025-08-16 17:56:55,459 - query_rewriter - INFO - Rewriter NET OUT → json keys=['ask_how_to_use', 'classification', 'error', 'expected_language', 'how_it_works', 'language', 'language_match', 'reason', 'rewrite_en']
2025-08-16 17:56:55,459 - query_rewriter - INFO - 🔍 CLASSIFICATION_DEBUG: query='Što je promjena klime?...' expected_lang=hr detected_lang=hr classification=on-topic language_match=True reason='User query is in Croatian and asks about climate change....'
2025-08-16 17:56:55,460 - src.models.climate_pipeline - INFO - Rewriter OUT → detected_lang='hr', classification='on-topic', language_match='yes', canned=False
2025-08-16 17:56:55,460 - src.models.climate_pipeline - INFO - Rewriter OUT → rewrite_en='What is climate change?'
2025-08-16 17:56:55,460 - src.models.climate_pipeline - INFO - ✓ Query rewritten (JSON) for better retrieval
2025-08-16 17:56:55,460 - src.models.climate_pipeline - INFO - Timing: rewrite=578.4ms
2025-08-16 17:56:55,460 - src.models.climate_pipeline - INFO - Step 4: Input Guards
2025-08-16 17:56:55,460 - src.models.climate_pipeline - INFO - ✓ Input guards passed
2025-08-16 17:56:55,460 - src.models.climate_pipeline - INFO - Timing: guards=0.0ms
2025-08-16 17:56:55,460 - src.models.climate_pipeline - INFO - Step 5: Document Retrieval
2025-08-16 17:56:55,460 - src.models.retrieval - INFO - 🔄 Pre-computing query embeddings to avoid redundant encode() calls
2025-08-16 17:56:55,460 - src.models.retrieval - INFO - Query embedding IN: query_len=23 chars, query_repr='What is climate change?...'
2025-08-16 17:56:56,234 - src.models.retrieval - INFO - dep=query_embed op=encode ms=773 dense_dim=1024 sparse_tokens=5
2025-08-16 17:56:56,285 - src.models.retrieval - INFO - dep=pinecone host=unknown op=query ms=50 status=OK
2025-08-16 17:56:56,285 - src.models.retrieval - INFO - dep=hybrid_search embed_ms=0 query_ms=50 total_ms=50
2025-08-16 17:56:56,451 - src.models.retrieval - INFO - dep=pinecone host=unknown op=query ms=165 status=OK
2025-08-16 17:56:56,451 - src.models.retrieval - INFO - pinecone.match type=<class 'pinecone.core.openapi.data.model.scored_vector.ScoredVector'> attrs_have_values=True has_values=True
2025-08-16 17:56:56,451 - src.models.retrieval - INFO - dep=hybrid_search embed_ms=0 query_ms=165 total_ms=165
2025-08-16 17:56:56,453 - src.models.retrieval - INFO - dep=mmr_embed used_index=7 used_cache=0 embedded=0 ms=0 n_docs=7 valid_vecs=7 q_embed_ms=0
2025-08-16 17:56:56,454 - src.models.rerank - INFO - dep=cohere_rerank payload_chars=8944 n_docs=7
2025-08-16 17:56:56,629 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-08-16 17:56:56,635 - src.models.rerank - INFO - dep=cohere_rerank host=api.cohere.com op=rerank ms=180.9 status=OK
2025-08-16 17:56:56,637 - src.models.retrieval - INFO - Retained docs preview: [{'title': 'Health Of Canadians In Changing Climate Report', 'pinecone_score': 0.280184954, 'rerank_score': 0.9995272, 'has_values': True}, {'title': 'Canadian Communities’ Guidebook For Adaptation To Climate Change Including An Ap', 'pinecone_score': 0.26793474, 'rerank_score': 0.99945575, 'has_values': True}, {'title': 'Planning To Be A Part Of My Region! Grade 9 Lesson Plans Designed For Students I', 'pinecone_score': 0.271402389, 'rerank_score': 0.9993881, 'has_values': True}, {'title': "Report For Action Toronto's Climate Change Readiness Updates Oncommitments And A", 'pinecone_score': 0.274087071, 'rerank_score': 0.99843913, 'has_values': True}, {'title': '11356 2022 Article 19718', 'pinecone_score': 0.270209789, 'rerank_score': 0.9980354, 'has_values': True}]
2025-08-16 17:56:56,637 - src.models.retrieval - INFO - q='What is climate change?', base=7, kept_pre=7, refill=0, final_before=5, final_after=5, hybrid_refill=0, floor=0.95, delta=0.100, max_sim_pre=0.280, p50_sim_pre=0.271, p95_sim_pre=0.280, blocked_base=0, dropped_top2=[]
2025-08-16 17:56:56,637 - src.models.climate_pipeline - INFO - ✓ Retrieved 5 documents
2025-08-16 17:56:56,637 - src.models.climate_pipeline - INFO - Timing: retrieval=1177.1ms
2025-08-16 17:56:56,637 - src.models.climate_pipeline - INFO - Step 6: Response Generation (Nova)
2025-08-16 17:56:56,637 - src.models.gen_response_unified - INFO - Starting nova response generation
2025-08-16 17:56:56,637 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:56:56,641 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:56:56,641 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:56:56,641 - src.models.gen_response_unified - INFO - Cache hit for nova - returning cached response
2025-08-16 17:56:56,641 - src.models.climate_pipeline - INFO - ✓ Response generated successfully in English
2025-08-16 17:56:56,641 - src.models.climate_pipeline - INFO - Timing: generation=4.5ms
2025-08-16 17:56:56,642 - src.models.climate_pipeline - INFO - Step 7: Quality Validation
2025-08-16 17:56:57,792 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=1148 status=OK request_id=4a0b89d9-32e2-44ac-83fb-08373650f70c
2025-08-16 17:56:57,825 - src.models.hallucination_guard - INFO - Faithfulness score: 0.9
2025-08-16 17:56:57,836 - src.models.climate_pipeline - INFO - ✓ Faithfulness score: 0.900
2025-08-16 17:56:57,836 - src.models.climate_pipeline - INFO - ✓ Assessment: Highly Faithful
2025-08-16 17:56:57,836 - src.models.climate_pipeline - INFO - Timing: faithfulness=1194.1ms
2025-08-16 17:56:57,836 - src.models.climate_pipeline - INFO - Step 8: Translating response to croatian (code=hr)
2025-08-16 17:57:09,996 - src.models.nova_flow - INFO - dep=bedrock host=bedrock.us-east-1.amazonaws.com op=invoke_model ms=12157 status=OK request_id=ce3d3ad4-0d44-4739-b964-a6f1e72cee41
2025-08-16 17:57:09,999 - src.models.climate_pipeline - INFO - ✓ Response translated successfully to croatian
2025-08-16 17:57:10,000 - src.models.climate_pipeline - INFO - Timing: translation=12163.7ms
2025-08-16 17:57:10,000 - src.models.redis_cache - INFO - Initializing Redis connection to localhost:6379 (SSL: False)
2025-08-16 17:57:10,004 - src.models.redis_cache - INFO - ✓ Redis connection test successful to localhost
2025-08-16 17:57:10,004 - src.models.redis_cache - INFO - ✓ Redis cache initialized for localhost
2025-08-16 17:57:10,009 - src.models.climate_pipeline - INFO - ✓ Response cached in croatian
2025-08-16 17:57:10,021 - src.models.climate_pipeline - INFO - ✓ English version also cached
2025-08-16 17:57:10,023 - src.models.climate_pipeline - INFO - Timing summary (ms): routing=0.2 rewrite=578.4 guards=0.0 retrieval=1177.1 generation=4.5 faithfulness=1194.1 translation=12163.7 total=15785.3
2025-08-16 17:57:10,023 - src.models.climate_pipeline - INFO - ✓ Query processed successfully in 15.79s
2025-08-16 17:57:10,025 - src.webui.api.routers.chat - INFO - Query processed successfully: id=req_1755381414212 time=15.810s model=nova faithfulness=0.900
2025-08-16 17:57:10,026 - src.webui.api.main - INFO - REQUEST POST /api/v1/chat/query status=200 time=15.814s id=req_1755381414212 ip=127.0.0.1
INFO:     127.0.0.1:51146 - "POST /api/v1/chat/query HTTP/1.1" 200 OK
